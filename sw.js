// import {precacheAndRoute} from 'workbox-precaching';

importScripts("https://unpkg.com/workbox-sw@7.1.0/build/workbox-sw.js");

const { StaleWhileRevalidate, NetworkFirst, CacheFirst } = workbox.strategies;
const { registerRoute } = workbox.routing;
const { warmStrategyCache } = workbox.recipes;
const { clientsClaim } = workbox.core;

const staleWhileRevalidate = new StaleWhileRevalidate();
const networkFirst = new NetworkFirst();
const cacheFirst = new CacheFirst();

registerRoute(/^https:\/\/lib\.baomitu\.com\/.*/, cacheFirst, "GET");
registerRoute(/^https:\/\/at\.alicdn\.com\/.*/, cacheFirst, "GET");
registerRoute(/^https:\/\/unpkg\.com\/.*/, cacheFirst, "GET");

// cdnjs 由于不透明响应需要使用 staleWhileRevalidate
registerRoute(
    /^https:\/\/cdnjs\.cloudflare\.com\/.*/,
    staleWhileRevalidate,
    "GET",
);

registerRoute(/^https:\/\/v1\.hitokoto\.cn\/.*/, staleWhileRevalidate, "GET");

registerRoute(/^https:\/\/blog\.cxzlw\.top\/.*/, networkFirst, "GET");
registerRoute(/^https:\/\/blog-api\.cxzlw\.top\/.*/, networkFirst, "GET");
registerRoute(/^http:\/\/localhost:8000\/.*\.html/, networkFirst, "GET");
// registerRoute(/^http:\/\/localhost:8000\/.*/, staleWhileRevalidate, "GET");

const urls = [{"revision":"0dc0458915612289ac704d4dcf5ca675","url":"2023/07/05/zhihu-aac-old/index.html"},{"revision":"6d70333a7190a5f8eba4335fdee1716b","url":"2023/07/06/zerotier-planet-convert/index.html"},{"revision":"e26c83614678cdf3179c8c7eb992db8d","url":"2023/08/04/permission-system-design-share/index.html"},{"revision":"521224bf0704fd4bae212f69a7e341a5","url":"2023/08/31/cell-structure/index.html"},{"revision":"055d9804506e156b5306bb8015a39d76","url":"2023/10/03/busuanzi-bug/index.html"},{"revision":"2eaef182869581181e584621d53aa0bc","url":"2024/07/11/json-format/index.html"},{"revision":"210af950a56e7c7c04de4da2ef13a2e5","url":"2024/09/06/htb-rsaiseasy/index.html"},{"revision":"f769cc65303f1cbc5470ce869328de05","url":"2024/10/22/jetbrains-202423/index.html"},{"revision":"c85c0fb2d1ce84b6ecdfa0b8e53df2a7","url":"404.html"},{"revision":"862e230bd2f013caf1cd6678f235ba4b","url":"about/index.html"},{"revision":"ca3939a963f5c346ecfdc4139deda964","url":"archives/2023/07/index.html"},{"revision":"874f99bf567a5d57effd702c4340c5c7","url":"archives/2023/08/index.html"},{"revision":"6ab9d6a567e5be4036bc48a079a9d833","url":"archives/2023/10/index.html"},{"revision":"3167fe94717266b41cf2e08a497f7592","url":"archives/2023/index.html"},{"revision":"40b6756d0b16e58642c47faa33f42f40","url":"archives/2024/07/index.html"},{"revision":"42e79fdf3e2319c1802c4c6265c931ef","url":"archives/2024/09/index.html"},{"revision":"6c7fbc662cdebf55844bf83c2e413d44","url":"archives/2024/10/index.html"},{"revision":"b9f78242bda5cea13b5ad34dc2785fd7","url":"archives/2024/index.html"},{"revision":"26ef46fe3cb217fbcf5b759a6d07edd5","url":"archives/index.html"},{"revision":"48b0aba4dde5c73fc701a56ef80f82ee","url":"baidu_verify_codeva-0rhRRODu4H.html"},{"revision":"62b328640af6af42478c54f90e3b245b","url":"BingSiteAuth.xml"},{"revision":"5a3b6222bdd713c742198f4eb273f2e2","url":"css/custom.css"},{"revision":"5ce280d86637a41c57fdc51fd463237a","url":"css/gitalk.css"},{"revision":"5efb63f1d0dfda0ed2a9388e0f97b029","url":"css/highlight-dark.css"},{"revision":"b922bdf053b930ff85184f5d60ab4614","url":"css/highlight.css"},{"revision":"d12c1662a51ca28291f46b906ec1f825","url":"css/main.css"},{"revision":"cf4a66f578f018d39f73676ff265dfb5","url":"css/transbg.css"},{"revision":"71cb12d00310a7852b853744c41d9a34","url":"favicon.ico"},{"revision":"ea11c930cb20962f72c29f0e2931bfbd","url":"img/animal.jpg"},{"revision":"2d9aa61e592b26e2745f3c161c48c397","url":"img/avatar.png"},{"revision":"beb05a6b5b201044b6d80cacdf29f905","url":"img/default.png"},{"revision":"5603316bb5bc54a9d5cab14fddd4c510","url":"img/fluid.png"},{"revision":"4d772ced566ade339ca6718c7ed38674","url":"img/image-1.png"},{"revision":"da72f7f7ab077659b259ff719bdd69cf","url":"img/image-10.png"},{"revision":"79c537611a196ae3d28a9d8e3ab2cc9b","url":"img/image-11.png"},{"revision":"992207d6ac18d3d30fa8bb8170f3d872","url":"img/image-12.png"},{"revision":"137ea73c630245985c0948597c940e3d","url":"img/image-13.png"},{"revision":"14a1ff2a02af5876f5747408ed899168","url":"img/image-14.png"},{"revision":"e9053a1c78a56adba4f44a1f2d853db6","url":"img/image-15.png"},{"revision":"ce12369f62702b5f2a0132757efe8ec3","url":"img/image-16.png"},{"revision":"f21d5dfc06c85736fb9730f3bd3a82c3","url":"img/image-17.png"},{"revision":"db98ae6079ec85d5109465b234acf650","url":"img/image-18.png"},{"revision":"adbffd666c7b027db214bf68b916ccb0","url":"img/image-19.png"},{"revision":"dcfafd0cc238b0a63a733edd1a70bcfe","url":"img/image-2.png"},{"revision":"a9f3f14b38d37ef5188f174360252cf2","url":"img/image-20.png"},{"revision":"20c0e2dea1ac2f8981580371ab291dcd","url":"img/image-21.png"},{"revision":"747e962e9fe0f84a7b11c6807f35bff2","url":"img/image-22.png"},{"revision":"2246b552616dcc328a53cd151d7f925e","url":"img/image-23.png"},{"revision":"20e4a34be4e20f2b7ab301273c877930","url":"img/image-24.png"},{"revision":"87a60ec3ad94aa34042adaf4d040e2cc","url":"img/image-25.png"},{"revision":"d0e5221c38ddce53198adf6e9bc2af81","url":"img/image-26.png"},{"revision":"49be186bbe7b39b973001179db92a01c","url":"img/image-27.png"},{"revision":"704cf8ae121192771df62fde0f5d713d","url":"img/image-28.png"},{"revision":"5ba9885de31a8d1e8df04a1d915b1069","url":"img/image-3.png"},{"revision":"a7ccb4c45029a7dd412c588a8d7cf27f","url":"img/image-30.png"},{"revision":"3d2983fa8549bb6a93b7b905a6baea9c","url":"img/image-4.png"},{"revision":"55692e23130e9504505085798384e43e","url":"img/image-5.png"},{"revision":"88c5e4fa4dec4b514a5d0d53b72d75c7","url":"img/image-6.png"},{"revision":"e52801ec8fe9abad24f24c8d96402fb3","url":"img/image-7.png"},{"revision":"3f940453e65f4635917f162b9a1d1432","url":"img/image-8.png"},{"revision":"47c43a3db8dca516e147f6f38324c1eb","url":"img/image-9.png"},{"revision":"a88a6883f6f27cd7b95a3ae753f91a40","url":"img/img-20231004-chrome-busuanzi.png"},{"revision":"f6f63a28b80c91ec49153f37df82f42d","url":"img/img-20231004-safari-busuanzi.png"},{"revision":"15657539044e11a19a1c6c7e3073d1b3","url":"img/loading.gif"},{"revision":"1b164cde9b70a49e2f3831d211be9f66","url":"img/plant.jpg"},{"revision":"b769e8dfde5660239317ed60758dba13","url":"img/police_beian.png"},{"revision":"74669a1c8e0c10b60ff13c2430adae44","url":"img/prokaryotic.jpg"},{"revision":"048c87992bbfbd1344b4555da4e8fb73","url":"index.html"},{"revision":"7683fab2fc9d03a3a659aa956b3a54e8","url":"js/boot.js"},{"revision":"20dbc6cdfd5e041dcb6e1a6224b77da1","url":"js/color-schema.js"},{"revision":"ca8f7191123f224f46f93c90eb186d73","url":"js/events.js"},{"revision":"da9ef54736d60394b99ddf046970250c","url":"js/image-ng.js"},{"revision":"fab30a410e5f490fce3f977a6936a714","url":"js/img-lazyload.js"},{"revision":"fb4a815ccdb5d851d00561dbb62251c4","url":"js/leancloud.js"},{"revision":"9dc47a0b7b6bacfd16541c9b2b5b6bc5","url":"js/local-search.js"},{"revision":"6c10bee3f659ca91b534bf4a81d62f1e","url":"js/plugins.js"},{"revision":"bcf46f84c19fd36f4b013d5de28d8f41","url":"js/progressbar-done.js"},{"revision":"f961495684626be6191c114e1e136247","url":"js/statistics.js"},{"revision":"c5ea612e1b9a9a905ee8ad080813b2ce","url":"js/umami-view.js"},{"revision":"f7ce9014de1cd7358eeb3aba81c8efe2","url":"js/utils.js"},{"revision":"5fa626529e4647f3741ad5b529e8c5af","url":"links/index.html"},{"revision":"0581b235b74b874c94632bd8372179f2","url":"local-search.xml"},{"revision":"0ff31e3a5c1e4a9395c348352f4de508","url":"sitemap.xml"},{"revision":"7dfdb5ffdc947c9d2d63c2be72d0ec1f","url":"tags/busuanzi/index.html"},{"revision":"39f54d88081dc165a0e14a60620ebf94","url":"tags/Crypto/index.html"},{"revision":"6771155b4158190d1ce47371d6a90cb5","url":"tags/CTF/index.html"},{"revision":"b3566defe99ab2ee0898a58ed590edcd","url":"tags/cxzlw/index.html"},{"revision":"842f68471bb5a826ef66d740db0c0bca","url":"tags/Fluid/index.html"},{"revision":"992591206d08a45787dd378173dbfe7f","url":"tags/HackTheBox/index.html"},{"revision":"f223894f46d172cc91ecf7341d8afcd5","url":"tags/Hexo/index.html"},{"revision":"e544c982d2f095b108a99d82be0d79f0","url":"tags/index.html"},{"revision":"5be0671b2e230027fb188cb9f6275da9","url":"tags/Python/index.html"},{"revision":"78c01defaaa420434bebfeb2a8546f13","url":"tags/RSA/index.html"},{"revision":"050c98fefbbc28dc156258735b323f0f","url":"tags/Writeup/index.html"},{"revision":"2477b5ab9e011bd86934d0a4d36b531e","url":"tags/Zerotier/index.html"},{"revision":"9ebacf21930d93f025805bc517d0bfca","url":"tags/不蒜子/index.html"},{"revision":"426be42a9bf4602de6fc8c63ddcdb87a","url":"tags/反爬/index.html"},{"revision":"b85d524dd16c97a2f0c28e1102bddc76","url":"tags/权限系统/index.html"},{"revision":"2651fc6fa36d1f147708f8150c3d3c55","url":"tags/爬虫/index.html"},{"revision":"c8681addf4df14bc999985dfb85572bd","url":"tags/知乎/index.html"},{"revision":"7d9e6e313c4bb59e1b886ea3de547036","url":"tags/自建-Planet/index.html"},{"revision":"082ac1a524cbf23b8ef0b2d6737dc2df","url":"tags/逆向/index.html"},{"revision":"decd4b8f6af7e1c9d8ae97249ac786fa","url":"xml/local-search.xml"}].map((element) => element["url"]);
const index_urls = urls
    .filter((url) => url.endsWith("index.html"))
    .map((url) => url.substring(0, url.length - 10));

warmStrategyCache({ urls: urls, strategy: networkFirst });
warmStrategyCache({ urls: index_urls, strategy: networkFirst });

skipWaiting();
clientsClaim();
