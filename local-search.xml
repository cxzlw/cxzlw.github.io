<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Zerotier 自定义 Planet 后与标准节点互通</title>
    <link href="/2023/07/06/zerotier-planet-convert/"/>
    <url>/2023/07/06/zerotier-planet-convert/</url>
    
    <content type="html"><![CDATA[<p>由于国内特殊的网络原因<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="不作评价">[1]</span></a></sup>，Zerotier 官方提供的 Planet 用户体验不佳。为此，不少人选择自建私有 Moon，甚至私有 Planet 服务器。然而，正如<a href="https://docs.zerotier.com/self-hosting/introduction#:~:text=If%20you%20are%20using%20a%20custom%20root%20setup%2C%20your%20nodes%20won%27t%20be%20able%20to%20find%20standard%20nodes.">官方文档所说</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[If you are using a custom root setup, your nodes won't be able to find standard nodes. ](https://docs.zerotier.com/self-hosting/introduction#:~:text=If%20you%20are%20using%20a%20custom%20root%20setup%2C%20your%20nodes%20won%27t%20be%20able%20to%20find%20standard%20nodes.)如果你使用自定义根配置，你的节点将无法找到其他标准节点。">[2]</span></a></sup>，使用私有 Planet 服务器会使你的节点无法找到其他的标准节点。本文试图提出一种方案在使用私有 Planet 服务器的同时与标准节点通信。</p><h2 id="一、生成-moon-json"><a href="#一、生成-moon-json" class="headerlink" title="一、生成 moon.json"></a>一、生成 moon.json</h2><p>这步主要是为了一个模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs batch">cd C:\ProgramData\ZeroTier\One<br>zerotier-idtool initmoon identity.public &gt;&gt; planet.json<br></code></pre></td></tr></table></figure><p>得到的 json：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br> <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;objtype&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;roots&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><br>   <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br>   <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey_SECRET&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;updatesMustBeSignedBy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;worldType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;moon&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="二、获得官方-Planet-的-identity-和-stableEndpoints"><a href="#二、获得官方-Planet-的-identity-和-stableEndpoints" class="headerlink" title="二、获得官方 Planet 的 identity 和 stableEndpoints"></a>二、获得官方 Planet 的 identity 和 stableEndpoints</h2><p>使用以下代码（照着 attic&#x2F;world&#x2F;mkworld.cpp 和 node&#x2F;Topology.cpp 改的）</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/C25519.hpp&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/Identity.hpp&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/InetAddress.hpp&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/World.hpp&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ZT_DEFAULT_WORLD_LENGTH 570 <span class="hljs-comment">// 这俩行来自 Topology.cpp</span></span><br><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> ZT_DEFAULT_WORLD[ZT_DEFAULT_WORLD_LENGTH] = &#123;<span class="hljs-number">0x01</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0xc9</span>,<span class="hljs-number">0x0a</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x7e</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0x60</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0xb8</span>,<span class="hljs-number">0xb3</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x69</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0x91</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x9a</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0x66</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0x76</span>,<span class="hljs-number">0x4c</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x56</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x9f</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0xe6</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x6f</span>,<span class="hljs-number">0xb4</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x7b</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0x33</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x3f</span>,<span class="hljs-number">0xda</span>,<span class="hljs-number">0xac</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x73</span>,<span class="hljs-number">0x40</span>,<span class="hljs-number">0xa6</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x21</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x4a</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0xbf</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x9a</span>,<span class="hljs-number">0xc9</span>,<span class="hljs-number">0xc8</span>,<span class="hljs-number">0x18</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0x36</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0x76</span>,<span class="hljs-number">0x37</span>,<span class="hljs-number">0xef</span>,<span class="hljs-number">0x4d</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x4d</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x46</span>,<span class="hljs-number">0x84</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0x13</span>,<span class="hljs-number">0x79</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x79</span>,<span class="hljs-number">0xb4</span>,<span class="hljs-number">0xc4</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0x60</span>,<span class="hljs-number">0x48</span>,<span class="hljs-number">0x24</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0xe1</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x9b</span>,<span class="hljs-number">0xe0</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0x29</span>,<span class="hljs-number">0x3c</span>,<span class="hljs-number">0x8b</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0xf1</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0xd2</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x48</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0xaf</span>,<span class="hljs-number">0xc5</span>,<span class="hljs-number">0x49</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x35</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0xa7</span>,<span class="hljs-number">0x5a</span>,<span class="hljs-number">0xdd</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0xce</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0xf6</span>,<span class="hljs-number">0xad</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x0d</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0x82</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0xbb</span>,<span class="hljs-number">0x77</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0x1e</span>,<span class="hljs-number">0xfa</span>,<span class="hljs-number">0x4b</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0xda</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x7a</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0xdd</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x9e</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0x7d</span>,<span class="hljs-number">0xed</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x4e</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xc5</span>,<span class="hljs-number">0xdf</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0x6d</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0xa6</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0x13</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x29</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0x97</span>,<span class="hljs-number">0x8e</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0xd3</span>,<span class="hljs-number">0x94</span>,<span class="hljs-number">0x8c</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0x3a</span>,<span class="hljs-number">0x8e</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x3d</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0xf4</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0x6a</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x0c</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0x1b</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x98</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x30</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x51</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x77</span>,<span class="hljs-number">0x8c</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x3f</span>,<span class="hljs-number">0x66</span>,<span class="hljs-number">0x81</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0x9e</span>,<span class="hljs-number">0x5a</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0x9f</span>,<span class="hljs-number">0xba</span>,<span class="hljs-number">0x33</span>,<span class="hljs-number">0xe6</span>,<span class="hljs-number">0x21</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0xe1</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xbc</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x1b</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x95</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0xd8</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0x2e</span>,<span class="hljs-number">0x42</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x2c</span>,<span class="hljs-number">0xb6</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x41</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0x81</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0x4a</span>,<span class="hljs-number">0xb1</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0xba</span>,<span class="hljs-number">0x3d</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x3a</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0x99</span>,<span class="hljs-number">0xa1</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x70</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0x42</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x98</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0xbc</span>,<span class="hljs-number">0xa1</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x19</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0xe2</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xd7</span>,<span class="hljs-number">0xd5</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0x40</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0xb1</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0xa3</span>,<span class="hljs-number">0x7d</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x7b</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0xe5</span>,<span class="hljs-number">0x41</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x5d</span>,<span class="hljs-number">0x3e</span>,<span class="hljs-number">0xf1</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0xc0</span>,<span class="hljs-number">0x1d</span>,<span class="hljs-number">0xff</span>,<span class="hljs-number">0x23</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0x7a</span>,<span class="hljs-number">0xd4</span>,<span class="hljs-number">0x23</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x95</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x2c</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x11</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x72</span>,<span class="hljs-number">0xbd</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0xdc</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x32</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0x8a</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x49</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0xd0</span>,<span class="hljs-number">0xdb</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x6a</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0x1d</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0xc1</span>,<span class="hljs-number">0x61</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x2a</span>,<span class="hljs-number">0x2b</span>,<span class="hljs-number">0x8f</span>,<span class="hljs-number">0x0f</span>,<span class="hljs-number">0xf9</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x74</span>,<span class="hljs-number">0xfb</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0xe3</span>,<span class="hljs-number">0xbe</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0x1c</span>,<span class="hljs-number">0xbf</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0xef</span>,<span class="hljs-number">0x17</span>,<span class="hljs-number">0xb7</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x82</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xa0</span>,<span class="hljs-number">0xa2</span>,<span class="hljs-number">0xa2</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x56</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x96</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0xbd</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x24</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0x7c</span>,<span class="hljs-number">0xc8</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0x7f</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x11</span>,<span class="hljs-number">0x35</span>,<span class="hljs-number">0x9b</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x2a</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0xa0</span>,<span class="hljs-number">0xd4</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x99</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>&#125;;<br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> ZeroTier;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>World world;<br>world.<span class="hljs-built_in">deserialize</span>(<span class="hljs-built_in">Buffer</span>&lt;ZT_DEFAULT_WORLD_LENGTH&gt;(ZT_DEFAULT_WORLD, ZT_DEFAULT_WORLD_LENGTH), <span class="hljs-number">0</span>);<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; root : world.<span class="hljs-built_in">roots</span>()) &#123;<br><span class="hljs-type">char</span> buf[ZT_IDENTITY_STRING_BUFFER_LENGTH];<br>std::cout &lt;&lt; root.identity.<span class="hljs-built_in">toString</span>(<span class="hljs-literal">false</span>, buf) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; sp : root.stableEndpoints) &#123;<br><span class="hljs-type">char</span> buf2[ZT_IDENTITY_STRING_BUFFER_LENGTH];<br>std::cout &lt;&lt; sp.<span class="hljs-built_in">toString</span>(buf2) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上代码发布在<a href="https://github.com/cxzlw/ZeroTierOne/blob/dev/attic/world/read_planet.cpp">ZeroTierOne&#x2F;attic&#x2F;world&#x2F;read_planet.cpp at dev · cxzlw&#x2F;ZeroTierOne · GitHub</a>。</p><p>运行结果如下：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cafe9efeb9</span>:<span class="hljs-number">0</span>:ccdef76bc7b97ded904eabc5df09886d9c1514a610036cb9139cc214001a2958978efcec15712dd3948c6e6b3a8e893df01ff493d1f8d9806a860c5420571bf0<br><span class="hljs-attribute">104</span>.<span class="hljs-number">194</span>.<span class="hljs-number">8</span>.<span class="hljs-number">134</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2605</span>:<span class="hljs-number">9880</span>:<span class="hljs-number">200</span>:<span class="hljs-number">1200</span>:<span class="hljs-number">30</span>:<span class="hljs-number">571</span>:e34:<span class="hljs-number">51</span>/<span class="hljs-number">9993</span><br><br><span class="hljs-attribute">778cde7190</span>:<span class="hljs-number">0</span>:<span class="hljs-number">3</span>f6681a99e5ad1895e9fba33e6212d4454e168bcec7112101bf000956ed8e92e42892cb6f2ec410881a84ab19da50e1287ba3d926c3a1f755cccf299a1207055<br><span class="hljs-attribute">103</span>.<span class="hljs-number">195</span>.<span class="hljs-number">103</span>.<span class="hljs-number">66</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2605</span>:<span class="hljs-number">9880</span>:<span class="hljs-number">400</span>:c3:<span class="hljs-number">254</span>:f2bc:a1f7:<span class="hljs-number">19</span>/<span class="hljs-number">9993</span><br><br><span class="hljs-attribute">62f865ae71</span>:<span class="hljs-number">0</span>:e2076c57de870e6288d7d5e7404408b1545efca37d67f77b87e9e54168c25d3ef1a9abf2905ea5e785c01dff23887ad4232d95c7a8fd2c27111a72bd159322dc<br><span class="hljs-attribute">50</span>.<span class="hljs-number">7</span>.<span class="hljs-number">252</span>.<span class="hljs-number">138</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2001</span>:<span class="hljs-number">49</span>f0:d0db:<span class="hljs-number">2</span>::<span class="hljs-number">2</span>/<span class="hljs-number">9993</span><br><br><span class="hljs-attribute">cafe04eba9</span>:<span class="hljs-number">0</span>:<span class="hljs-number">6</span>c6a9d1dea55c1616bfe2a2b8f0ff9a8cacaf70374fb1f39e3bef81cbfebef17b7228268a0a2a29d3488c752565c6c965cbd6506ec24397cc8a5d9d15285a87f<br><span class="hljs-attribute">84</span>.<span class="hljs-number">17</span>.<span class="hljs-number">53</span>.<span class="hljs-number">155</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2a02</span>:<span class="hljs-number">6</span>ea0:d405::<span class="hljs-number">9993</span>/<span class="hljs-number">9993</span><br></code></pre></td></tr></table></figure><h2 id="三、按照上述结果修改-moon-json"><a href="#三、按照上述结果修改-moon-json" class="headerlink" title="三、按照上述结果修改 moon.json"></a>三、按照上述结果修改 moon.json</h2><p>大概修改成这样</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br> <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cafe9efeb9&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;objtype&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;roots&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cafe9efeb9:0:ccdef76bc7b97ded904eabc5df09886d9c1514a610036cb9139cc214001a2958978efcec15712dd3948c6e6b3a8e893df01ff493d1f8d9806a860c5420571bf0&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;104.194.8.134/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2605:9880:200:1200:30:571:e34:51/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;778cde7190:0:3f6681a99e5ad1895e9fba33e6212d4454e168bcec7112101bf000956ed8e92e42892cb6f2ec410881a84ab19da50e1287ba3d926c3a1f755cccf299a1207055&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;103.195.103.66/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2605:9880:400:c3:254:f2bc:a1f7:19/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;62f865ae71:0:e2076c57de870e6288d7d5e7404408b1545efca37d67f77b87e9e54168c25d3ef1a9abf2905ea5e785c01dff23887ad4232d95c7a8fd2c27111a72bd159322dc&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;50.7.252.138/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2001:49f0:d0db:2::2/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cafe04eba9:0:6c6a9d1dea55c1616bfe2a2b8f0ff9a8cacaf70374fb1f39e3bef81cbfebef17b7228268a0a2a29d3488c752565c6c965cbd6506ec24397cc8a5d9d15285a87f&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;84.17.53.155/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2a02:6ea0:d405::9993/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey_SECRET&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;updatesMustBeSignedBy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;worldType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;moon&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="四、生成-moon-文件"><a href="#四、生成-moon-文件" class="headerlink" title="四、生成 .moon 文件"></a>四、生成 .moon 文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">zerotier-idtool genmoon .\moon.json<br></code></pre></td></tr></table></figure><h2 id="五、使用-moon-文件"><a href="#五、使用-moon-文件" class="headerlink" title="五、使用 .moon 文件"></a>五、使用 .moon 文件</h2><p>在 Zerotier 目录<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linux 是 `/var/lib/zerotier-one`，Windows 是 `C:\ProgramData\ZeroTier\One\`，别的不知道。">[3]</span></a></sup>下新建文件夹 moons.d。</p><p>把生成的 xxxxxxxxxxxxxxxx.moon 放到你的 moons.d文件夹。</p><p>重启 Zerotier 服务（不会重启的建议重启电脑）。</p><p>这样就好了，你可以开始享用你的自定义 Planet 带来的低延迟体验和官方 Planet 上大量的节点了</p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>在这篇文章中，我们通过将 Zerotier 自带的 Planet 转为 Moon 来进行连接，以帮助使用自定义 Planet 的节点与官方 Planet 上的节点进行通信。这方便了我们在使用低延迟的自建 Planet 的同时与大量标准节点进行通信。</p><h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>不作评价<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.zerotier.com/self-hosting/introduction#:~:text=If%20you%20are%20using%20a%20custom%20root%20setup%2C%20your%20nodes%20won%27t%20be%20able%20to%20find%20standard%20nodes.">If you are using a custom root setup, your nodes won’t be able to find standard nodes. </a>如果你使用自定义根配置，你的节点将无法找到其他标准节点。<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Linux 是 <code>/var/lib/zerotier-one</code>，Windows 是 <code>C:\ProgramData\ZeroTier\One\</code>，别的不知道。<a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>Zerotier</tag>
      
      <tag>自建Planet</tag>
      
      <tag>cxzlw</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《飞石》Pt.1 未掷出的石子</title>
    <link href="/2023/07/05/trace-of-line-01/"/>
    <url>/2023/07/05/trace-of-line-01/</url>
    
    <content type="html"><![CDATA[<p>欢迎来番茄小说看：<a href="https://fanqienovel.com/page/7252346503144934404">飞石完整版在线免费阅读_飞石小说_番茄小说官网</a></p><div class="note note-info">            <p>本小说任何情节均为虚构，与现实中任何国家、团体、组织与个人无关</p>          </div><p>不存在的历史，勾起了石月仙的注意，随着找寻真相的深入，一个隐瞒了全世界的阴谋浮出水面。而对于人类，阴谋何来，何从，何去？</p><h2 id="第一章：不存在的历史"><a href="#第一章：不存在的历史" class="headerlink" title="第一章：不存在的历史"></a>第一章：不存在的历史</h2><p>「第三次科技革命后，人类进入信息时代，信息化开始影响人类的历史进程……」</p><p>「为什么初中高中上过的还要再上一遍啊？我都快烦死了。」石月仙在心中自言自语道，眼睛无神地看着教授在全息屏上指指点点。</p><p>「怎么就没有第四次科技革命呢？第一次工业革命与第二次工业革命之间几乎没有罅隙，第二次与第三次也只隔了几十年，第三次科技革命都过去快 100 年了，怎么第四次科技革命一点苗头的没有呢？」</p><p>下课铃响，教授一溜烟没影了，消失在学生们的视野中。学生们鱼贯而出，奔着食堂而去。留下石月仙一人在教室里沉思。</p><p>「前几年的反重力技术，为什么仅仅运用在交通上呢？而且没人知道这项技术的原理，反重力技术的出现会是第四次科技革命的源头吗？」</p><p>一阵如蟾蜍一般的叫声回响在空荡的教室中。石月仙起身走出教室，穿过鳞次栉比的教学楼，终于走到了饭堂前。只见同系的人垂头丧气地走出来。</p><p>「怎么了？饭被抢完了？」石月仙问道。</p><p>「那可不，我们历史系总是放得最晚的那一个，最后一批饭被信息技术系那一帮吃货抢完了。」一个同学说道。</p><p>「只好叫外卖了，虽然要等一会。」另一个同学掏出终端核心，终端核心将点餐界面投影在众人面前。</p><p>「AA 制吧，每个人付自己的。」石月仙提议道。众人附和。</p><p>等餐期间，石月仙抛出了脑中的疑问，霎时间众说纷纭。</p><p>「也许是人类的科学发展到头了？」</p><p>「或者是自然环境不足以支撑生产力发展，导致科技发展没有动力源推动吗？」</p><p>「哎呀，管它呢，科学家的事和我们历史系学生有什么关系？」</p><p>石月仙觉得这些说法都有道理，但又都不太合理。</p><p>「算了，还是问问陈鸢学长吧，他懂得多，找他问说不定会有答案。」</p><p>下午放学后，正值周末，石月仙得以回家拜访住在对门的陈鸢。</p><p>几阵敲门声后，门缓缓而开，陈鸢看见石月仙，连忙请进门。</p><p>「是什么风把你吹来了？这次又有什么问题问我？」陈鸢的眼睛炯炯有神，好像下一秒就能来往古今，穿梭时空。</p><p>石月仙再一次抛出了那一个问题。陈鸢的手揪着下巴，倒吸一口凉气。</p><p>顷刻，他终于开口：「说实话，我没头绪。」</p><p>「所以第四次科技革命到底是发生了，只是我们不知道，还是没发生呢？」石月仙疑惑地问道。</p><p>「要说发生了吧，近几年反重力技术在交通工具上的运用和全息投影技术在电子产品方面的运用说明科技进步了不少；但要说没发生吧，后者是对第三次科技革命产物的改进，没有革新性，前者又不知道为什么没有运用于生产，而且没有人知道其运行原理。」陈鸢边说，边回头翻找书架上的历史文献。</p><p>窗外下着倾盆大雨，梅雨时节的阴风时不时地溜进阴暗的房间，并调皮地光顾一圈，随性地翻了几页书，无趣地走了。扶摇直上，直奔远处庞大的由纺织混凝土构建而成的庞然巨物——那是漂浮在老城上的新城。石月仙拿起终端核心，手指一划，屋内顿时明堂起来。</p><p>「找到了，我爷爷当年拼老命才护存下来的历史书。」陈鸢轻柔地擦拭着泛黄的封皮，扫去积灰。</p><p>「拼老命护存下来的？」石月仙大感震惊，瞳孔放得如黑珍珠一般大。</p><p>「对，我爷爷说，这是历史所尘封的往事，一些人所不愿意看到的。当年知识大革命爆发的时候，几乎所有历史类书籍全部被联合政府焚毁了，他和丁教授守着居民楼，冒着生命危险，击退了前来焚书的民间组织，这才成功守护了我们家的藏书。」陈鸢抚摸着褶皱的纸页，眼睛里闪着晶莹的微光。</p><p>「我只听说过，知识大革命是一些民众和官员为了彻底改变教育体系而发动的一场暴力运动。最后搞得各国取消了统一升学考试，直接赋予各大学自治权。」石月仙眉头褶皱起来。</p><p>陈鸢扶着桌案，缓缓说道：「教育革命只是假象，实际上……」一阵急促的敲门声把使说话声戛然而止，如同一株苗被掐死在新泥之中。</p><p>陈鸢连忙起身，拉开门，只见一位少女，扶着墙壁，气喘吁吁，眼眸里闪着飘忽不定的光。</p><p>「是你？怎么这么急匆匆的？出了什么事吗？」陈鸢问道。</p><p>「是教授，丁教授他……被军队带走了！」少女娇柔的声音里镶嵌着恐惧。</p><p>「我现在就去看看。」陈鸢披上雨衣，就随少女冲出门去。石月仙也立刻拽起雨伞，带上门，朝着烟帷奔去。</p><p>「丁教授？（丁胜）我听说过，才到中年就退休的教授……可是这和军方有什么关系？」石月仙边狂奔，心里边嘀咕着。</p><p>穿过烟帷与街道，只见萧疏树木下，一辆军用飞车腾空而起，闪着红光，飞驰而去。</p><p>街道小巷里空无一人，往日车水马龙的景象在呼啸的阴风中如烟消云散一般消失，唯余渺小的三人在烟帷雨幕中无助地站立。</p><p>「怎么办？表舅就这样莫名其妙地被带走了。」少女欲哭无泪。</p><p>陈鸢拍拍她的肩，安慰道：「没事的，杜子娟，丁教授为人正直，又没干什么坏事……」</p><p>「可是军方把一个退休历史教授带走是何用意呢？」杜子娟颤颤巍巍。</p><p>出乎所有人的意料，骤然一声刺耳的，深入脑髓的声响回荡在三人脑中。石月仙捂着双耳，却也是徒劳，帷幕拉下，一片黑黢黢，紧接着便是身体不受控制，瘫倒在地。</p><p>不知过了多久，恍惚间，石月仙隐隐约约地听到某人的交谈声。</p><p>「将军，这些人怎么办？上面只要他一个。」</p><p>「这些人等会做记忆清除，然后放走。」</p><p>「我们先核验一下身份……等等，我们好像弄错人了！」</p><p>「将军，你确定我们弄错人了？要不要再找上面确认一下？」</p><p>「不用了，我敢肯定，一定是弄错了，你看……」</p><p>……</p><p>不知又过了多久，石月仙终于醒了过来，只见眼前是一台古老的机械钟，钟摆正吃力地摇摆着。再定睛一看，环顾四周，除了陈鸢和杜子娟，还有一位正在沉睡的中年男子。</p><p>「我才注意到你们睡着了，奇了怪了，刚刚我们不是还在讨论阿兹特克文明吗？」 陈鸢说到。</p><p>「不知道啊，诶？表舅？醒醒！」杜子娟推搡着中年男子，中年男子打了一声哈欠，伸了个懒腰，才从沉睡中醒来。</p><p>「是不是二氧化碳含量过高了啊，刚刚我和陈鸢还恍惚了一下，差点睡过去。」杜子娟起身前去开窗，窗外旖旎的阳光抚摸着葳蕤的树林，大地吐着热浪，碧空之上万里无云。</p><p>「话说刚刚丁教授不是被军方带走了吗？石月仙疑问道。</p><p>「你在胡说什么啊，是不是刚刚做梦了？」陈鸢摸了摸石月仙的头。「没发烧啊。」</p><p>正当石月仙迷茫之际，众人已经沉醉于阿兹特克文明的讨论之中了。</p><p>「他妈的，今天到底是怎么回事？是我记忆错乱了吗？还是我把梦境当成现实了？」石月仙心里想象着无限种可能性，但都没办法说服自己。</p><p>「这就是不存在的历史啊。」陌生而空灵的声音在石月仙脑海中响起。</p><p>「是谁？谁在跟我说话？」石月仙彷徨地问道。</p><p>众人的目光再次投向石月仙</p><p>「你没事吧？要不我给你冲一杯咖啡？」杜子娟关切道。</p><p>石月仙摆摆手：「我一个人静静就好，也许是我昨天晚上没睡好。」</p><p>「话说你表舅是历史教授，你怎么就是信息技术系的呢？」陈鸢调侃道。「你明明还是有点学历史的天赋的。」</p><p>「我看是抢饭挺有天赋的。」石月仙内心暗暗调侃道。</p><p>霎时间，又是陌生而空灵的声音在脑畔响起，但这一次，不只是石月仙。</p><p>「N29.35,E106.33。」</p><p>「是谁？谁在说话？」陈鸢叫到。</p><p>「你们也听到了？」丁教授惊魂未定。</p><p>「这是在说地理坐标吗？」杜子娟问道。</p><p>「不会有错，就是地理坐标，我估计应该是在西京附近。」石月仙肯定地说道。</p><p>「是谁在跟我们说话呢？以这么诡异的形式。」丁教授倒吸一口凉气。</p><p>沉默是今午的康桥。</p><p>「所以要怎么做到同时在四个人脑海里说话呢？」陈鸢揉搓着下巴颏。</p><p>「如果大脑是个终端，那就有可能。」杜子娟不假思索便答道。</p><p>「等等，陈学长，我是什么时候拜访你的来着？」石月仙问道。</p><p>「今天早上啊，你问我阿兹特克文明的事，我就带你来丁教授家讨论了。」陈鸢答道。</p><p>「现在去你家，我知道发生什么了。」石月仙不由分说拉着陈鸢的手就走。</p><p>「诶等等，还有你那个坐标的事呢！」杜子娟喊到。</p><p>「等会再说。」杜子娟耳畔是渐远的石月仙的喊声。</p><p>石月仙几乎是撞开了陈鸢家门，把陈鸢拉到客厅。</p><p>「你这么急干嘛？」陈鸢喘着粗气。</p><p>「今天你撕过日历吗？」石月仙问道。</p><p>「撕过了。」陈鸢摊开手。</p><p>「来，把你的日历拿出来。我记得你有把日历放在枕头底下的习惯。」石月仙推开陈鸢卧室的门。</p><p>陈鸢弯下腰去，翻开枕头，枕头底下是被压得褶皱了的纸质日历。</p><p>「今天是几号？」石月仙掏出核心终端，把全息影像几乎是贴在了陈鸢脸上。</p><p>「2116 年 6 月 18……等等，日历上显示的日期6月17日！这不可能！我清楚地记得我今天早上，正好在你来的前几分钟，把 17 日的日历撕掉了！</p><p>「这说明什么？说明今天早上你根本不在你家，甚至根本没有醒过来！」</p><p>「所以，你方才说的什么军方什么的，难道不是胡话？」</p><p>「这是我觉得最蹊跷的地方，你们的记忆都对的上，但唯独我的记忆与你们的有出入。我记得那天，6 月 17 日下午……」陈鸢简述了自己在拜访陈鸢后的所有记忆。</p><p>「这就是不存在的历史！你记得与我们有出入绝对不是巧合！可能是谁的特意安排。而且并不是你记忆错乱了，是我们失忆了！并且被覆写了新的不存在的记忆！」陈鸢惊叹道。</p><p>「对了，你还记得知识大革命吗？」</p><p>「不就是一些民众和官员为了彻底改变教育体系而发动的一场暴力运动吗？」陈鸢不假思索便说道。</p><p>石月仙在书架前来回踱步。在寻找遍书架和桌案后，他肯定的眼神闪着光，对陈鸢说：「书不见了，那本尘封着历史真相的书不见了。」</p><p>「你在说哪本书？」陈鸢走上前。</p><p>「果然，这么想就说得通了！」石月仙重重地拍了一下桌案。</p>]]></content>
    
    
    
    <tags>
      
      <tag>飞石</tag>
      
      <tag>小说</tag>
      
      <tag>离谱网文</tag>
      
      <tag>路过的某个学渣</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>聊聊知乎盐选反爬 (回答页篇)</title>
    <link href="/2023/07/05/zhihu-aac-old/"/>
    <url>/2023/07/05/zhihu-aac-old/</url>
    
    <content type="html"><![CDATA[<p>最近，知乎上线了针对专栏<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="专栏反爬现已更新，故本文只以回答反爬为演示。">[1]</span></a></sup>中盐选文章的反爬系统，随后该系统也被运用在知乎回答页面中的盐选文章上。具体表现为爬取的文章内容中出现大量的错乱词汇。而在本篇文章中，我们将一步步带领各位解开这些乱码。在这个过程中，我们将对字体反爬有更深入的认识，并学到运用字体反爬时需要注意的问题。</p><h2 id="一、知乎反爬效果"><a href="#一、知乎反爬效果" class="headerlink" title="一、知乎反爬效果"></a>一、知乎反爬效果</h2><p>来自知乎回答<a href="https://www.zhihu.com/question/41922324/answer/3073556909">不被爱是一种什么样的感受？ - 知乎</a></p><p><img src="/../img/image.png" alt="乱码示意图"> </p><p>如图所示，在页面源码中出现了大量乱码，例如（原字，错字）：<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="由于知乎回答页反爬使用了两套字体，故本文所有截图，代码运行结果等内容可能与实际不符。你可以选择以实际为主或刷新页面直到页面显示的内容与本文一致。">[2]</span></a></sup></p><ul><li>中 -&gt; 在</li><li>是 -&gt; 时</li><li>上 -&gt; 大</li></ul><p>这些乱码使得文章可读性大大下降，那么乱码是怎么产生的？又如何解决这个问题呢？</p><h2 id="二、找寻乱码真凶"><a href="#二、找寻乱码真凶" class="headerlink" title="二、找寻乱码真凶"></a>二、找寻乱码真凶</h2><p>观察上述现象，页面源码中的字，在被显示到页面后，居然变成了正确的字。因此我们初步推断知乎在该页面运用了字体反爬。</p><p>接下来我们打开 F12 -&gt; Network 页面，选择 Font，观察知乎加载的字体。</p><p><img src="/../img/image-1.png" alt="知乎加载的字体"></p><p>右键选择 Open in new tab 将字体保存下来。</p><p><img src="/../img/image-2.png" alt="下载的字体文件"></p><p>将字体后缀名改为 .ttf <sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label=".ttf 是因为 `data:font/ttf;...` 代表该字体是 ttf 格式的。">[3]</span></a></sup> 并打开。</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/../img/image-3.png" alt="正常字体"></div><div class="group-image-wrap"><img src="/../img/image-4.png" alt="反爬字体"></div></div></div><figcaption aria-hidden="true" class="image-caption">左：正常字体 右：反爬字体</figcaption><p>与正常字体对比，我们下载的字体明显替换了部分字体，这便是知乎用于反爬的字体了。接下来我们将分析这个字体并给出应对方案。</p><h2 id="三、致命缺陷"><a href="#三、致命缺陷" class="headerlink" title="三、致命缺陷"></a>三、致命缺陷</h2><p>字体反爬的根本原理是替换原本的字为一个新字，再用字体将新字渲染为原字，这样对程序而言就只见到新字而不是旧字了，而用户看到的还是原本的内容。因此只要找到新字与原字间的对应关系便可解决该反爬。而要找到这个对应关系，抓住字体中各个字形的特征是必不可少的一环。</p><p>我们打开 <a href="https://fontdrop.info/">FontDrop!</a> 加载字体，向下翻，观察字形的特征。</p><p><img src="/../img/image-5.png" alt="字体中的字形"></p><p>我们发现字形的 Glyph 为 uni662F 而 Unicode 为 65F6，接下来我们试着查询这两个十六进制数对应的字：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">glyph = <span class="hljs-string">&quot;\u662F&quot;</span><br>unicode = <span class="hljs-string">&quot;\u65F6&quot;</span><br><span class="hljs-built_in">print</span>(glyph, unicode)<br><span class="hljs-comment"># output: 是 时</span><br></code></pre></td></tr></table></figure><p>正好，上文提到，「是」在源码中被替换为了「时」。知乎在反爬字体中保留了原字与新字的对应关系，为我们提供了一个极为便捷的捷径。我们可以直接读取这个对应关系，而不是比对每个字的笔画<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="基于笔画比对的反爬破解见该文章：[字体反爬之汽车之家_51CTO博客_汽车之家字体反爬](https://blog.51cto.com/u_15289428/2992542)（话说这篇文章和下面注10是一个网站吧）">[4]</span></a></sup>。然而，这也是其字体反爬系统的致命缺陷，各位在自己的网站运用字体反爬时也要注意这一点。</p><p>至此，字形的特征与对应关系都被我们分析出了，接下来我们将编写程序从字体中提取对应关系。</p><h2 id="四、提取对应关系"><a href="#四、提取对应关系" class="headerlink" title="四、提取对应关系"></a>四、提取对应关系</h2><p>要提取各个字间的对应关系，首先我们需要安装 fontTools <sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="fontTools文档：[fontTools Docs — fontTools Documentation](https://fonttools.readthedocs.io/en/latest/)">[5]</span></a></sup>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install fonttools<br></code></pre></td></tr></table></figure><p>用 <code>ttLib.TTFont(filename)</code> 打开字体：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fontTools <span class="hljs-keyword">import</span> ttLib<br><br>font = ttLib.TTFont(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Input font filename: &quot;</span>))<br></code></pre></td></tr></table></figure><p>初始化一个存储对应关系的字典：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">zhihu_dict = &#123;&#125;<br></code></pre></td></tr></table></figure><p>遍历字形，获得其 Glyph 与 Unicode，并写入字典（注意这里的Glyph对应的字可能不是标准的字，比如是康熙部首<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="康熙部首相关文章：[康熙部首导致的字典查询异常](https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhlbDBrcwfMRe9c0b15eJPVo5VFZ-BkntaZvQ1EOGDIdWZ4*dM*9NMTwroaqkGu17aagpE6SDr8v2FgsrmKGus4Z&new=1)">[6]</span></a></sup>，因此我们要对其标准化<sup id="fnref:7" class="footnote-ref"><a href="#fn:7" rel="footnote"><span class="hint--top hint--rounded" aria-label="标准化相关文章：[化异为同，Python 在背后帮你做的转换](https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhnpJwhWtfcrbfZyZ0LrFFbzVDaXDT2onRWaIWo*r2Sv9Tg*ZBiuWotp9WQdbrawvxGLj0T5U-xC2fnssc4lEsLl&new=1#:~:text=%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E6%89%8B%E5%86%99%E5%AD%97%E7%AC%A6%F0%9D%91%93%E9%80%9A%E8%BF%87%20NFKC%20%E6%A0%87%E5%87%86%E8%BD%AC%E6%8D%A2%E4%BB%A5%E5%90%8E%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%99%AE%E9%80%9A%E7%9A%84%E5%AD%97%E6%AF%8Df%EF%BC%8C%E6%89%80%E4%BB%A5%E5%9C%A8%20Python%20%E9%87%8C%E9%9D%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%9C%E4%B8%BA%E5%8F%98%E9%87%8F%E5%90%8D%EF%BC%8C%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%E3%80%82)">[7]</span></a></sup>）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> unicodedata <span class="hljs-keyword">import</span> normalize<br><br>cmap = font.getBestCmap()<br><br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> cmap.items():<br>    zhihu_dict[<span class="hljs-built_in">chr</span>(x[<span class="hljs-number">0</span>])] = normalize(<span class="hljs-string">&quot;NFKC&quot;</span>, <span class="hljs-built_in">chr</span>(<span class="hljs-built_in">int</span>(x[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>:], <span class="hljs-number">16</span>)))<br><br><span class="hljs-built_in">print</span>(zhihu_dict)  <span class="hljs-comment"># &#123;&#x27;一&#x27;: &#x27;不&#x27;, ......, &#x27;这&#x27;: &#x27;发&#x27;&#125;</span><br></code></pre></td></tr></table></figure><p>（这里的 cmap 是一个 dict，是字形的 {Unicode: Glyph}<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="其中 Unicode 为 int 而 Glyph 为形如 uni4E0D 的 str">[8]</span></a></sup>）</p><p>接下来，我们将使用得到的对应关系将带乱码的文章转为正常文章。</p><h2 id="五、去除乱码"><a href="#五、去除乱码" class="headerlink" title="五、去除乱码"></a>五、去除乱码</h2><p>这段代码很简单，不作解释。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">raw_content = <span class="hljs-string">&quot;在间那块奶酪夹心，时饼干被的喜爱了灵魂。&quot;</span><br>new_content = raw_content.translate(<span class="hljs-built_in">str</span>.maketrans(zhihu_dict))<br><span class="hljs-built_in">print</span>(new_content)  <span class="hljs-comment"># 中间那块奶酪夹心，是饼干被人喜爱的灵魂。</span><br></code></pre></td></tr></table></figure><h2 id="六、全部代码"><a href="#六、全部代码" class="headerlink" title="六、全部代码"></a>六、全部代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fontTools <span class="hljs-keyword">import</span> ttLib<br><span class="hljs-keyword">from</span> unicodedata <span class="hljs-keyword">import</span> normalize<br><br>font = ttLib.TTFont(<span class="hljs-string">&quot;DynamicFonts30.ttf&quot;</span>)<br><br>zhihu_dict = &#123;&#125;<br>cmap = font.getBestCmap()<br><br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> cmap.items():<br>    zhihu_dict[<span class="hljs-built_in">chr</span>(x[<span class="hljs-number">0</span>])] = normalize(<span class="hljs-string">&quot;NFKC&quot;</span>, <span class="hljs-built_in">chr</span>(<span class="hljs-built_in">int</span>(x[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>:], <span class="hljs-number">16</span>)))<br><br><span class="hljs-built_in">print</span>(zhihu_dict)  <span class="hljs-comment"># &#123;&#x27;一&#x27;: &#x27;不&#x27;, ......, &#x27;这&#x27;: &#x27;发&#x27;&#125;</span><br><br>raw_content = <span class="hljs-string">&quot;在间那块奶酪夹心，时饼干被的喜爱了灵魂。&quot;</span><br>new_content = raw_content.translate(<span class="hljs-built_in">str</span>.maketrans(zhihu_dict))<br><span class="hljs-built_in">print</span>(new_content)  <span class="hljs-comment"># 中间那块奶酪夹心，是饼干被人喜爱的灵魂。</span><br></code></pre></td></tr></table></figure><div class="note note-warning">            <p>温馨提示：上面字体文件名记得换成你自己下载的字体文件名</p>          </div><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>在本文的带领下，我们粗略地了解了知乎所使用的反爬技术，分析了其使用的反爬字体，找出了原字与新字的对应关系，最终将带乱码的文章转为了正常文章。其中，知乎使用的反爬字体没有去掉 Unicode 与 Glyph 的对应关系，虽然这使我们更轻松地得到了对应关系，但是对于知乎而言，这种错误无疑是致命的，因此，在字体反爬的实际运用中，我们更需要避免这种错误。<sup id="fnref:9" class="footnote-ref"><a href="#fn:9" rel="footnote"><span class="hint--top hint--rounded" aria-label="关于如何创造更坚固的字体反爬系统，可以参考这篇文章：[反爬终极方案总结—字体反爬 - 知乎](https://zhuanlan.zhihu.com/p/37838586)（值得一提的是这篇文章就被发表在在知乎上2333）">[9]</span></a></sup></p><p>知乎也在该反爬系统部署到回答页不久以后升级了其专栏反爬系统，本文所介绍的致命缺陷已被修复<sup id="fnref:10" class="footnote-ref"><a href="#fn:10" rel="footnote"><span class="hint--top hint--rounded" aria-label="值得表扬( •̀ ω •́ )y">[10]</span></a></sup>，而解码新反爬系统的内容，就留到本系列的下篇吧。</p><p>（敬请期待）</p><h2 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h2><ul><li><a href="https://cdycc.cn/">C的云存储 - C的云存储所有作品均由用户提供上传分享，仅供网友学习交流!若您的权利被侵害，请联系 357158361@qq.com</a></li><li><a href="https://github.com/cxzlw/zhihuDecrypt">GitHub - cxzlw&#x2F;zhihuDecrypt</a></li><li><a href="https://github.com/cxzlw/zhihuDecryptApp">GitHub - cxzlw&#x2F;zhihuDecryptApp: The app to decrypt zhihu’s encrypted (probably not) passages.</a></li></ul><h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>专栏反爬现已更新，故本文只以回答反爬为演示。<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>由于知乎回答页反爬使用了两套字体，故本文所有截图，代码运行结果等内容可能与实际不符。你可以选择以实际为主或刷新页面直到页面显示的内容与本文一致。<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>.ttf 是因为 <code>data:font/ttf;...</code> 代表该字体是 ttf 格式的。<a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>基于笔画比对的反爬破解见该文章：<a href="https://blog.51cto.com/u_15289428/2992542">字体反爬之汽车之家_51CTO博客_汽车之家字体反爬</a>（话说这篇文章和下面注10是一个网站吧）<a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>fontTools文档：<a href="https://fonttools.readthedocs.io/en/latest/">fontTools Docs — fontTools Documentation</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>康熙部首相关文章：<a href="https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhlbDBrcwfMRe9c0b15eJPVo5VFZ-BkntaZvQ1EOGDIdWZ4*dM*9NMTwroaqkGu17aagpE6SDr8v2FgsrmKGus4Z&new=1">康熙部首导致的字典查询异常</a><a href="#fnref:6" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>标准化相关文章：<a href="https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhnpJwhWtfcrbfZyZ0LrFFbzVDaXDT2onRWaIWo*r2Sv9Tg*ZBiuWotp9WQdbrawvxGLj0T5U-xC2fnssc4lEsLl&new=1#:~:text=%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E6%89%8B%E5%86%99%E5%AD%97%E7%AC%A6%F0%9D%91%93%E9%80%9A%E8%BF%87%20NFKC%20%E6%A0%87%E5%87%86%E8%BD%AC%E6%8D%A2%E4%BB%A5%E5%90%8E%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%99%AE%E9%80%9A%E7%9A%84%E5%AD%97%E6%AF%8Df%EF%BC%8C%E6%89%80%E4%BB%A5%E5%9C%A8%20Python%20%E9%87%8C%E9%9D%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%9C%E4%B8%BA%E5%8F%98%E9%87%8F%E5%90%8D%EF%BC%8C%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%E3%80%82">化异为同，Python 在背后帮你做的转换</a><a href="#fnref:7" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:8" class="footnote-text"><span>其中 Unicode 为 int 而 Glyph 为形如 uni4E0D 的 str<a href="#fnref:8" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:9" class="footnote-text"><span>关于如何创造更坚固的字体反爬系统，可以参考这篇文章：<a href="https://zhuanlan.zhihu.com/p/37838586">反爬终极方案总结—字体反爬 - 知乎</a>（值得一提的是这篇文章就被发表在在知乎上2333）<a href="#fnref:9" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:10" class="footnote-text"><span>值得表扬( •̀ ω •́ )y<a href="#fnref:10" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>cxzlw</tag>
      
      <tag>知乎</tag>
      
      <tag>反爬</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
