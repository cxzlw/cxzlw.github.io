<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Biology - Cell structure</title>
    <link href="/2023/08/31/cell-structure/"/>
    <url>/2023/08/31/cell-structure/</url>
    
    <content type="html"><![CDATA[<h1 id="Cell-structure"><a href="#Cell-structure" class="headerlink" title="Cell structure"></a>Cell structure</h1><h2 id="Mind-map"><a href="#Mind-map" class="headerlink" title="Mind map"></a>Mind map</h2><pre><code class=" mermaid">mindmap    root((Cell structure))        Organelles all typical cells have            Cell membrane                Controls movement in and out of cells.                Outer membrane of cell                Semi-permeable            Cytoplasm                Where chemical reactions take place.                Surrounded by cell membrane                Gel-like mixture containing solutes, organelles, and water            Nucleus                Contains DNA and controls the cell.                Has a nuclear membrane, so DNA is not floating about            Mitochondria                Where aerobic respiration happens.                Folds: create lots of surface area for reactions            Ribosomes                Allows protein synthesis                Each cell contains thousands of them                Make proteins by translating RNA codes        Animal cell            Cell membrane            Cytoplasm            Nucleus            Mitochondria            Ribosomes        Plant cell            Cell membrane            Cytoplasm            Nucleus            Mitochondria            Ribosomes            Cell wall                Rigid to keep the shape of the cell, strengthens the cell.                Outermost layer                Permeable: They don&#x27;t select who comes in and who leaves            Large Vacuole                Cell sap to keep cell turgid.                Membrane-bound sacs for storage, digestion, and waste removal                Contains water solution            Chloroplast                Contain chlorophyll, which absorbs light energy for photosynthesis.                In green parts of plants        Prokaryotic cell            Cell membrane            Cytoplasm            Ribosomes            Circular DNA                Instead of chromosomes, also called Nucleoid, is essential for controlling the activity and reproduction of the prokaryotic cell.            Plasmid                Small circles of DNA            Cell wall                Made of peptidoglycan not cellulose        Differences            Plant vs Animal                Cell Wall                Large Vacuole                Chloroplasts            Plant vs Prokaryotic                Nucleus vs Nucleoid and Plasmid                Cellulose vs Peptidoglycan</code></pre><h2 id="Organelles-all-typical-cells-have"><a href="#Organelles-all-typical-cells-have" class="headerlink" title="Organelles all typical cells have"></a>Organelles all typical cells have</h2><h3 id="Cell-membrane"><a href="#Cell-membrane" class="headerlink" title="Cell membrane"></a>Cell membrane</h3><p>Controls movement in and out of cells.</p><ul><li>Outer membrane of cell</li><li>Semi-permeable</li></ul><h3 id="Cytoplasm"><a href="#Cytoplasm" class="headerlink" title="Cytoplasm"></a>Cytoplasm</h3><p>Where chemical reactions take place.</p><ul><li>Surrounded by cell membrane</li><li>Gel-like mixture containing solutes, orangelles, and water</li></ul><h3 id="Nucleus"><a href="#Nucleus" class="headerlink" title="Nucleus"></a>Nucleus</h3><p>Contains DNA and controls the cell.</p><ul><li>Has a nuclear membrane, so DNA is not floating about</li></ul><h3 id="Mitochondria"><a href="#Mitochondria" class="headerlink" title="Mitochondria"></a>Mitochondria</h3><p>Where aerobic respiration happens.</p><ul><li>Folds: create lots of surface area for reactions</li></ul><h3 id="Ribosomes"><a href="#Ribosomes" class="headerlink" title="Ribosomes"></a>Ribosomes</h3><p>Allows protein synthesis</p><ul><li>Each cell contains thousands of them</li><li>Make proteins by translating RNA codes</li></ul><h2 id="Animal-cell"><a href="#Animal-cell" class="headerlink" title="Animal cell"></a>Animal cell</h2><p>Animal cell has all above.</p><h3 id="Diagram"><a href="#Diagram" class="headerlink" title="Diagram"></a>Diagram</h3><p><img src="/../img/animal.jpg" alt="Animal cell diagram"></p><h2 id="Plant-cell"><a href="#Plant-cell" class="headerlink" title="Plant cell"></a>Plant cell</h2><p>Plant cell especially also have:</p><h3 id="Cell-wall"><a href="#Cell-wall" class="headerlink" title="Cell wall"></a>Cell wall</h3><p>Rigid to keep the shape of the cell, strengthens the cell.</p><ul><li>Outermost layer</li><li>Permeable: They don’t select who comes in and who leaves</li></ul><h3 id="Large-Vacuole"><a href="#Large-Vacuole" class="headerlink" title="Large Vacuole"></a>Large Vacuole</h3><p>Cell sap to keep cell turgid.</p><ul><li>Membrane-bound sacs for storage, digestion, and waste removal</li><li>Contains water solution</li></ul><h3 id="Chloroplast"><a href="#Chloroplast" class="headerlink" title="Chloroplast"></a>Chloroplast</h3><p>Contain chlorophyll, which absorbs light energy for photosynthesis.</p><ul><li>In green parts of plants</li></ul><h3 id="Diagram-1"><a href="#Diagram-1" class="headerlink" title="Diagram"></a>Diagram</h3><p><img src="/../img/plant.jpg" alt="Plant cell diagram"></p><h2 id="Prokaryotic-cell"><a href="#Prokaryotic-cell" class="headerlink" title="Prokaryotic cell"></a>Prokaryotic cell</h2><p>Prokaryotic cell <strong>do not</strong> have Mitochondria and Nucleus but organelles below.</p><h3 id="Cell-wall-1"><a href="#Cell-wall-1" class="headerlink" title="Cell wall"></a>Cell wall</h3><p>Rigid to keep the shape of the cell, strengthens the cell.</p><ul><li>Made of <strong>peptidoglycan</strong> not cellulose</li></ul><h3 id="Circular-DNA"><a href="#Circular-DNA" class="headerlink" title="Circular DNA"></a>Circular DNA</h3><p>Instead of chromosomes, also called <em>Nucleoid</em>, is essential for controlling the acticity and reproduction of the<br>prokaryotic cell.</p><h3 id="Plasmid"><a href="#Plasmid" class="headerlink" title="Plasmid"></a>Plasmid</h3><p>Small circles of DNA.</p><h3 id="Diagram-2"><a href="#Diagram-2" class="headerlink" title="Diagram"></a>Diagram</h3><p><img src="/../img/prokaryotic.jpg" alt="Prokaryotic cell diagram"></p><h2 id="Differences"><a href="#Differences" class="headerlink" title="Differences"></a>Differences</h2><h3 id="Organelles-in-cells"><a href="#Organelles-in-cells" class="headerlink" title="Organelles in cells"></a>Organelles in cells</h3><table><thead><tr><th>Organelles \ Cells</th><th>Plant Cell</th><th>Animal Cell</th><th>Prokaryotic Cell</th></tr></thead><tbody><tr><td>Cell Wall</td><td>Yes</td><td></td><td></td></tr><tr><td>Cell Membrane</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Chloroplasts</td><td>Yes</td><td></td><td></td></tr><tr><td>Cytoplasm</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Mitochondria</td><td>Yes</td><td>Yes</td><td></td></tr><tr><td>Nucleus</td><td>Yes</td><td>Yes</td><td></td></tr><tr><td>Ribosome</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Large Vacuole</td><td>Yes</td><td></td><td></td></tr><tr><td>Circular DNA</td><td></td><td></td><td>Yes</td></tr><tr><td>Plasmid</td><td></td><td></td><td>Yes</td></tr></tbody></table><h3 id="Some-differences-between-a-plant-cell-and-an-animal-cell"><a href="#Some-differences-between-a-plant-cell-and-an-animal-cell" class="headerlink" title="Some differences between a plant cell and an animal cell"></a>Some differences between a plant cell and an animal cell</h3><ol><li>A plant cell has cell wall, while an animal cell hasn’t.</li><li>A plant cell has large vacuole, while an animal cell hasn’t.</li><li>No animal cell has chloroplasts, but some plant cell do.</li></ol><h3 id="Some-differences-between-a-plant-cell-and-a-prokaryotic-cell"><a href="#Some-differences-between-a-plant-cell-and-a-prokaryotic-cell" class="headerlink" title="Some differences between a plant cell and a prokaryotic cell."></a>Some differences between a plant cell and a prokaryotic cell.</h3><ol><li>A plant cell has nucleus, and a prokaryotic cell has nucleoid and plasmid instead.</li><li>Cell wall in a plant cell is made of cellulose but peptidoglycan in a prokaryotic cell.</li></ol><div class="note note-info">            <p>This page was rendered by my blog locally, for a beautiful and well-layouted result, so there are things related to my<br>blog. These things don’t mean it was downloaded from someone’s blog. Of course, this page won’t be avaliable to the<br>public before the assessment is no longer accepting submissions.</p>          </div>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>我感兴趣的社团及时间</title>
    <link href="/2023/08/22/eca-i-am-interested-in/"/>
    <url>/2023/08/22/eca-i-am-interested-in/</url>
    
    <content type="html"><![CDATA[<p>在这整理一下</p><table><thead><tr><th>ECA</th><th>time</th><th>want</th><th>chose</th><th>notes</th></tr></thead><tbody><tr><td>Minecraft Technology</td><td>周一 中午</td><td>YES</td><td></td><td>Maybe No Attendance?</td></tr><tr><td>Mathematics For Everyone</td><td>周一 16:30</td><td></td><td></td><td>参加一半就全给 Present</td></tr><tr><td>ML x AI</td><td>周一 16:30</td><td>YES</td><td>YES</td><td></td></tr><tr><td>A+ Lit Club</td><td>周一 16:30</td><td></td><td></td><td></td></tr><tr><td>SCIE DEV</td><td>周二 16:30</td><td>YES</td><td>YES</td><td></td></tr><tr><td>TBU</td><td>周二中午</td><td>YES</td><td></td><td></td></tr><tr><td>Bonvoy 旅享家</td><td>周二下午</td><td></td><td></td><td></td></tr><tr><td>FRC 机器人</td><td>周二 16:30</td><td></td><td></td><td></td></tr><tr><td>(FFE) Behavior Finance Frontier</td><td>周二 16:30 - 17:20</td><td></td><td></td><td></td></tr><tr><td>Web Frontend Development</td><td>周三下午</td><td>YES</td><td></td><td>全给 Present，没了？？</td></tr><tr><td>Neuro Boost</td><td>周四 16:30 - 17:30</td><td></td><td></td><td></td></tr><tr><td>Advanced Math &amp; Computer Science</td><td>周四 16:40 - 17:40</td><td></td><td></td><td></td></tr><tr><td>聚光文学社</td><td>周五 15:10 - 16:00</td><td></td><td></td><td></td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>将 Python 项目打包为 Windows service</title>
    <link href="/2023/08/08/python-to-windows-service/"/>
    <url>/2023/08/08/python-to-windows-service/</url>
    
    <content type="html"><![CDATA[<p>今天想把一个 Python 项目用 Nuitka 打包后设为开机自启。突然发现 Nuitka Commercial 可以把 Python 项目打包为 Windows service， 然而要钱（这周生活费够不够我吃的都是个问题……）。当然人家也给出了 <code>win32service</code> 这个东西，那自然要看看。</p><div class="note note-warning">            <p>前排提醒，我还没解决没网络权限的问题 :(</p>          </div><h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h2><p>安装主要是 <code>pywin32</code> 和 <code>nuitka</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install nuitka pywin32<br></code></pre></td></tr></table></figure><h3 id="原程序"><a href="#原程序" class="headerlink" title="原程序"></a>原程序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> app <span class="hljs-keyword">import</span> app<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(<span class="hljs-string">&quot;0.0.0.0&quot;</span>, <span class="hljs-number">8899</span>)<br><br></code></pre></td></tr></table></figure><h2 id="二、改为-Windows-service"><a href="#二、改为-Windows-service" class="headerlink" title="二、改为 Windows service"></a>二、改为 Windows service</h2><p>参考 <a href="https://gist.github.com/drmalex07/10554232">An example Windows service implemented with pywin32 wrappers. #python #windows-service #pywin32  · GitHub</a> 和 <a href="https://stackoverflow.com/questions/25770873/python-windows-service-pyinstaller-executables-error-1053/25934756#25934756">Python Windows service pyinstaller executables error 1053 - Stack Overflow</a>，将上面的代码改成这样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># Filename: windows_service_entry</span><br><br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">import</span> servicemanager<br><span class="hljs-keyword">import</span> win32serviceutil<br><br><span class="hljs-keyword">from</span> app <span class="hljs-keyword">import</span> app<br><span class="hljs-keyword">from</span> win32serviceutil <span class="hljs-keyword">import</span> ServiceFramework<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WinSvcEntry</span>(<span class="hljs-title class_ inherited__">ServiceFramework</span>):<br>    _svc_name_ = <span class="hljs-string">&quot;StandaloneLicenseServer&quot;</span><br>    _svc_display_name_ = <span class="hljs-string">&quot;Standalone License Server&quot;</span><br>    _svc_description_ = <span class="hljs-string">&quot;Standalone License Server by cxzlw&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, args</span>):<br>        <span class="hljs-built_in">super</span>().__init__(args)<br>        self.running = <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">SvcDoRun</span>(<span class="hljs-params">self</span>):<br>        app.run(<span class="hljs-string">&quot;0.0.0.0&quot;</span>, <span class="hljs-number">8899</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">SvcStop</span>(<span class="hljs-params">self</span>):<br>        app.stop()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) == <span class="hljs-number">1</span>:<br>        servicemanager.Initialize()<br>        servicemanager.PrepareToHostSingle(WinSvcEntry)<br>        servicemanager.StartServiceCtrlDispatcher()<br>    <span class="hljs-keyword">else</span>:<br>        win32serviceutil.HandleCommandLine(WinSvcEntry)<br><br></code></pre></td></tr></table></figure><p>然后用 Nuitka 打包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nuitka windows_service_entry.py --follow-imports --standalone<br></code></pre></td></tr></table></figure><p>跑起来，记得带管理员权限。然后不出所料地，炸了……</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs log">ModuleNotFoundError: No module named &#x27;win32timezone&#x27;<br></code></pre></td></tr></table></figure><p>把 <code>win32timezone</code> 加到 Nuitka 的 <code>--include-module</code> 里面，再打包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nuitka windows_service_entry.py --follow-imports --standalone --include-module=<span class="hljs-string">&quot;win32timezone&quot;</span><br></code></pre></td></tr></table></figure><h2 id="三、运行-安装"><a href="#三、运行-安装" class="headerlink" title="三、运行&#x2F;安装"></a>三、运行&#x2F;安装</h2><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs batch">windows_service_entry.exe install<br></code></pre></td></tr></table></figure><p>更新</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs batch">windows_service_entry.exe update<br></code></pre></td></tr></table></figure><p>启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs batch">windows_service_entry.exe start<br></code></pre></td></tr></table></figure><p>停止</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs batch">windows_service_entry.exe stop<br></code></pre></td></tr></table></figure><h2 id="四、限制"><a href="#四、限制" class="headerlink" title="四、限制"></a>四、限制</h2><p>需要注意的是，这样跑起来的 service 并没有权限访问网络。这个问题到现在我也没解决，<del>可以期待一下接下来的一篇文章</del>（也失败了，就不发了 :( ）。</p><p>唉，要说运行一个 Web server 肯定是失败了。但是作为一个 Windows service，还是可以跑的……</p><p>同时，如果有相应的解决方案的，欢迎告诉我，谢谢。</p>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>cxzlw</tag>
      
      <tag>Windows service</tag>
      
      <tag>Nuitka</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>分享一个 Python 权限系统库的设计</title>
    <link href="/2023/08/04/permission-system-design-share/"/>
    <url>/2023/08/04/permission-system-design-share/</url>
    
    <content type="html"><![CDATA[<p>最近在参与某 OJ 的开发，过程中我们需要一个权限系统。作为一个热爱 MC 的开发者，我很喜欢 luckperms 的设计，于是这个小东西就出来了。在这里给大家分享我们的权限系统设计。</p><h2 id="为什么不使用现成的库？"><a href="#为什么不使用现成的库？" class="headerlink" title="为什么不使用现成的库？"></a>为什么不使用现成的库？</h2><ol><li>如上文所说，我很喜欢 luckperms 的 <code>Group</code>，<code>Node</code>，<code>Route</code></li><li>我们希望整个项目使用 PonyORM</li><li>我们希望这个库最好不要与某个 Web Framework 强关联，例如现在我们在用的 <code>Flask</code>，以便我们应对可能的切换框架的情况</li></ol><h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><h3 id="权限组"><a href="#权限组" class="headerlink" title="权限组"></a>权限组</h3><p>权限组储存了以下信息</p><ul><li>权限组的名字</li><li>权限组的权重，这个权重只影响直属节点</li><li>权限组的成员，也就是用户</li><li>权限组继承的其他权限组</li><li>权限组直属的权限节点</li></ul><p>权限组的成员不一定要在创建时指定，可以为用户指定某个权限组，效果是一样的。</p><p>权限组可以继承自其他权限组。相同的权限，会取权重较高的权限节点的值。也就是说，会覆盖低权重的节点</p><p>一般情况下，继承自某个权限组的新权限组，权重应当更高，这样才能覆盖某些权限。同时，检查权限时，如果遇到相同权重却互相矛盾的权限节点，无法保证其结果。</p><h3 id="权限节点"><a href="#权限节点" class="headerlink" title="权限节点"></a>权限节点</h3><p>权限节点储存了以下信息</p><ul><li>一个权限 id，代表一个权限</li><li>一个 <code>bool</code> 值，代表是否拥有上述权限</li></ul><p>权限节点本身没有权重，其权重来源是直属的权限组。</p><p>值得一提的是，一般情况下你不需要明确为没有某种权限的权限组，添加值为 <code>False</code> 的权限节点。检查权限时，没有值为 <code>True</code> 的对应节点，相当于没有这个权限。</p><p>我们一般使用值为 <code>False</code> 的权限节点来覆盖父权限组下的某些权限。</p><h3 id="权限-id"><a href="#权限-id" class="headerlink" title="权限 id"></a>权限 id</h3><p>权限是一个概念，在这里我们以权限 id 的形式来代表某种权限。</p><p>这个 id 是一个字符串，其没有具体的命名规则。具体由使用者制定。但我们建议你使用形如 <code>user.login</code>，<code>problem.edit</code>，<code>problem.1001.edit</code> 的格式命名。</p><h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><h3 id="检查权限"><a href="#检查权限" class="headerlink" title="检查权限"></a>检查权限</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> permission <span class="hljs-keyword">import</span> check_permission<br><br>user: User = ...  <span class="hljs-comment"># 自行实现获得 User 对象的代码</span><br><span class="hljs-built_in">print</span>(check_permission(user))<br><br></code></pre></td></tr></table></figure><h3 id="权限节点-1"><a href="#权限节点-1" class="headerlink" title="权限节点"></a>权限节点</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">user: PermissionGroup = ...  <span class="hljs-comment"># 自行实现获得 PermissionGroup 对象的代码</span><br><br><span class="hljs-comment"># PermissionNode 没有 instance 方法</span><br><span class="hljs-comment"># 因此你需要自己避免在一个 PermissionGroup 下出现重复的 PermissionNode</span><br><span class="hljs-comment"># owner 是一个 PermissionGroup 对象，代表该节点属于这个权限组</span><br><span class="hljs-comment"># permission 是一个权限 id 字符串，检查权限时使用权限 id 而不是权限节点</span><br><span class="hljs-comment"># 代表同一个 permission 的 权限节点可能有多个，他们属于不同的权限组</span><br>this_node = PermissionNode(permission=<span class="hljs-string">&quot;user.login&quot;</span>, value=<span class="hljs-literal">True</span>, owner=user)<br><br>this_node.value = <span class="hljs-literal">False</span>  <span class="hljs-comment"># 修改该权限节点的值，True 代表有这个权限，False代表没有</span><br><br></code></pre></td></tr></table></figure><h3 id="权限组-1"><a href="#权限组-1" class="headerlink" title="权限组"></a>权限组</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># instance 方法可以保证 name 相同时，每次运行都是同一个 PermissionGroup</span><br><span class="hljs-comment"># 方便你维护一个存储了你所有权限结构的文件</span><br><span class="hljs-comment"># 比如我们现在修改的是用户组</span><br>this_group = PermissionGroup.instance(name=<span class="hljs-string">&quot;User&quot;</span>, weight=<span class="hljs-number">1</span>)<br><br>parents = this_group.parents  <span class="hljs-comment"># 该权限组继承的权限组们</span><br>parents.add(another_group)  <span class="hljs-comment"># 使该权限组继承 another_group</span><br>parents.remove(another_group)  <span class="hljs-comment"># 使该权限组不再继承 another_group</span><br><br>this_group.weight = <span class="hljs-number">1</span>  <span class="hljs-comment"># 修改该权限组的权重</span><br><br>this_group.members.add(user)  <span class="hljs-comment"># 向该权限组添加用户</span><br>this_group.members.remove(user)  <span class="hljs-comment"># 从该权限组移除用户</span><br><br>this_group.nodes.add(permission_node)  <span class="hljs-comment"># 向该权限组添加权限节点</span><br>this_group.nodes.remove(permission_node)  <span class="hljs-comment"># 从该权限组移除权限节点</span><br><br></code></pre></td></tr></table></figure><h3 id="针对单个用户修改权限"><a href="#针对单个用户修改权限" class="headerlink" title="针对单个用户修改权限"></a>针对单个用户修改权限</h3><p>思路是给用户分配一个单独的高权限 Group，再给这个 Group 分配 Node</p><h2 id="代码分享"><a href="#代码分享" class="headerlink" title="代码分享"></a>代码分享</h2><h3 id="models-db-py"><a href="#models-db-py" class="headerlink" title="models&#x2F;db.py"></a>models&#x2F;db.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pony.orm <span class="hljs-keyword">import</span> Database<br><br>db = Database()<br><br></code></pre></td></tr></table></figure><h3 id="models-user-py"><a href="#models-user-py" class="headerlink" title="models&#x2F;user.py"></a>models&#x2F;user.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pony.orm <span class="hljs-keyword">import</span> Required, <span class="hljs-type">Set</span>, <span class="hljs-type">Optional</span><br><br><span class="hljs-keyword">from</span> .db <span class="hljs-keyword">import</span> db<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(db.Entity):<br>    <span class="hljs-comment"># You should add fields you need here. </span><br>    permission_groups = <span class="hljs-type">Set</span>(<span class="hljs-string">&quot;PermissionGroup&quot;</span>)<br><br></code></pre></td></tr></table></figure><h3 id="models-permission-group-py"><a href="#models-permission-group-py" class="headerlink" title="models&#x2F;permission_group.py"></a>models&#x2F;permission_group.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pony.orm <span class="hljs-keyword">import</span> Required, <span class="hljs-type">Set</span>, db_session<br><br><span class="hljs-keyword">from</span> .db <span class="hljs-keyword">import</span> db<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionGroup</span>(db.Entity):<br>    name = Required(<span class="hljs-built_in">str</span>, unique=<span class="hljs-literal">True</span>)<br>    weight = Required(<span class="hljs-built_in">int</span>)<br>    nodes = <span class="hljs-type">Set</span>(<span class="hljs-string">&quot;PermissionNode&quot;</span>)<br>    members = <span class="hljs-type">Set</span>(<span class="hljs-string">&quot;User&quot;</span>)<br>    parents = <span class="hljs-type">Set</span>(<span class="hljs-string">&quot;PermissionGroup&quot;</span>, reverse=<span class="hljs-string">&quot;childs&quot;</span>)<br>    childs = <span class="hljs-type">Set</span>(<span class="hljs-string">&quot;PermissionGroup&quot;</span>, reverse=<span class="hljs-string">&quot;parents&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br><span class="hljs-meta">    @db_session</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">instance</span>(<span class="hljs-params">cls, name, weight=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Return an PermissionGroup instance.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        If a PermissionGroup with the name exists, it will directly return the group,</span><br><span class="hljs-string">            with new weight value. It is noticeable that, if weight is not given, it won&#x27;t be changed.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Or, it will create a new PermissionGroup with the given name and weight value.</span><br><span class="hljs-string">            Notice that if the weight is not given here, an ValueError will be thrown.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        result = cls.get(name=name)<br>        <span class="hljs-keyword">if</span> result <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">if</span> weight <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>                <span class="hljs-keyword">raise</span> ValueError<br>            <span class="hljs-keyword">return</span> cls(name=name, weight=weight)<br>        <span class="hljs-keyword">if</span> weight <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            result.weight = weight<br>        <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></table></figure><h3 id="models-permission-node-py"><a href="#models-permission-node-py" class="headerlink" title="models&#x2F;permission_node.py"></a>models&#x2F;permission_node.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pony.orm <span class="hljs-keyword">import</span> Required, db_session<br><br><span class="hljs-keyword">from</span> .db <span class="hljs-keyword">import</span> db<br><span class="hljs-keyword">from</span> .permission_group <span class="hljs-keyword">import</span> PermissionGroup<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionNode</span>(db.Entity):<br>    permission = Required(<span class="hljs-built_in">str</span>)<br>    value = Required(<span class="hljs-built_in">bool</span>)<br>    owner = Required(PermissionGroup)<br><br></code></pre></td></tr></table></figure><h3 id="permission-init-py"><a href="#permission-init-py" class="headerlink" title="permission&#x2F;__init__.py"></a>permission&#x2F;__init__.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue<br><br><span class="hljs-keyword">from</span> models <span class="hljs-keyword">import</span> User<br><span class="hljs-keyword">from</span> pony.orm <span class="hljs-keyword">import</span> select<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check_permission</span>(<span class="hljs-params">user: User, permission</span>):<br>    queue = Queue()<br>    weight = <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;-inf&quot;</span>)<br>    value = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> group <span class="hljs-keyword">in</span> user.permission_groups:<br>        queue.put(group)<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> queue.empty():<br>        group = queue.get()<br>        <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> group.parents:<br>            queue.put(g)<br>        <span class="hljs-keyword">if</span> group.weight &lt; weight:<br>            <span class="hljs-keyword">continue</span><br>        values = select(node.value <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> group.nodes <span class="hljs-keyword">if</span> node.permission == permission)<br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> values:<br>            value = v<br>            weight = group.weight<br>    <span class="hljs-keyword">return</span> value<br><br></code></pre></td></tr></table></figure><h2 id="代码许可"><a href="#代码许可" class="headerlink" title="代码许可"></a>代码许可</h2><p>如无特殊授权，以上代码均以 <a href="https://www.gnu.org/licenses/agpl-3.0.html">GNU AGPLv3</a> 授权</p>]]></content>
    
    
    
    <tags>
      
      <tag>权限系统</tag>
      
      <tag>Python</tag>
      
      <tag>cxzlw</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Latex测试</title>
    <link href="/2023/08/04/test-latex/"/>
    <url>/2023/08/04/test-latex/</url>
    
    <content type="html"><![CDATA[<p>$$<br>E&#x3D;mc^2<br>$$</p><p>WORK? </p><p>hello, Alex Weng…</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>《飞石》Pt.1 未掷出的石子 第二章：失忆？归真会？</title>
    <link href="/2023/07/10/trace-of-line-02/"/>
    <url>/2023/07/10/trace-of-line-02/</url>
    
    <content type="html"><![CDATA[<p>欢迎来番茄小说看：<a href="https://fanqienovel.com/page/7252346503144934404">飞石完整版在线免费阅读_飞石小说_番茄小说官网</a></p><div class="note note-info">            <p>本小说任何情节均为虚构，与现实中任何国家、团体、组织与个人无关</p>          </div><p>不存在的历史，勾起了石月仙的注意，随着找寻真相的深入，一个隐瞒了全世界的阴谋浮出水面。而对于人类，阴谋何来，何从，何去？</p><h2 id="第二章：失忆？归真会？"><a href="#第二章：失忆？归真会？" class="headerlink" title="第二章：失忆？归真会？"></a>第二章：失忆？归真会？</h2><p>「你家里关于知识大革命真实历史的藏书消失了，不仅如此，你对于知识大革命原有的记忆也消失了。这说明什么？」</p><p>「说明有人想彻底地掩埋真相？」</p><p>「没错，丁教授搬离我们这栋楼之前，必然也接触过关于知识大革命真相的记忆，甚至，可能，他家里也有类似的藏书，所以他和杜子娟也会被删除记忆。」</p><p>陈鸢疑惑道：「我赞同，可是为什么唯独你没有失忆呢？还有一点，那个弄错……」</p><p>「因为你是特殊的存在啊。」那陌生而空灵的声音再度响起，二人的对话又一次被打断。</p><p>「你，你到底是谁？为什么能跟我们说话？」石月仙惊慌地问道。</p><p>「你不必知道，总之过来就对了。」陌生而空灵的声音回响在二人的脑海中，渐渐远去。</p><p>「究竟是怎么一回事啊？」陈鸢疯狂地挠着头，头上的头皮屑如雪花一般飘飘然落下。</p><p>「要不，我们听他的，去西京碰碰运气？」</p><p>又是一阵急促的敲门声。陈鸢拉开门看，门外站着满头大汗的杜子娟和丁教授。</p><p>「怎么了？弄得像回南天的墙壁似的。」石月仙关心道。</p><p>「我发现教授枕头底的日历没有撕，这是根本不可能发生的事。」杜子娟急切地说道。</p><p>「噗。」石月仙捂住嘴巴，不停地憋笑。「不愧是有其师必有其徒。」</p><p>「怎么？陈鸢的日历也没撕？」丁教授粗犷而沉稳的声音震得鱼缸里的水荡起了涟漪。</p><p>石月仙再一次阐述了自己的推测和刚刚发生的事。</p><p>「特殊的存在？还有那个弄错人是什么意思？」杜子娟陷入了沉思。「怎么比代码还烧脑？」</p><p>「既然我们被放出来了，只能说明两种可能，其一是他们真的弄错了；其二是那个将军想救我们，于是不知道用什么方法蒙混过关，把我们放出来了。但不可否认的是无论是哪一种可能，记忆删除都是无法避免的。」陈鸢揉搓着下巴颏分析道。</p><p>「失忆还能人为操控的？」石月仙疑问道。</p><p>「想必，大脑是个终端的话，记忆删除、记忆覆写都是有可能的。」杜子娟麻花一般的发辫在高阳下的微风中摇曳。</p><p>「大脑为什么是个终端呢？」丁教授缓缓问道。</p><p>「想必在场的人都对生物一概不知吧。」杜子娟冷冷地笑了笑。「太巧了，我也不会。」</p><p>屋内一片死寂，静得可怕。</p><p>「总之，先去西京吧。」石月仙率先打破沉默。</p><p>众人这才散去，着手准备第二天的行囊。</p><p>花与树恹恹欲睡，唯有蝉鸣与清风谱写初夏的乐章。</p><p>一个月亮过去了，朝阳冒出点点金光，昭示着黎明破晓。绿叶刚从梦境中醒来，眼角挤满了泪滴。树与花深吸一口气，清新的晨风自远方袭来，散入葳蕤林缬之中，吹拂潋滟水面，荡起水与风的缱绻<br>情缘。</p><p>「出发！」杜子娟推了推眼上的墨镜，手指耸立的高大车站，荷叶边短裙下是纤细白皙的双腿。</p><p>四人的影子镶嵌在站前广场的石砖上。无遮无掩，一览无余，天空注视着一切。</p><p>「好有趣，第一次体验失忆是什么感觉。」石月仙愉快中夹杂着意思不安。</p><p>「这不算失忆吧，也不能算是记忆错乱，这个应该叫记忆篡改。」陈鸢纠正道。</p><p>「总觉得，有种不安感，本能的不安感。」丁教授摸着心说道。</p><p>灼烧着烈日，吹拂着微风，嗥鸣着飞鸟，拥嚷着人群。列车开入站台，人们被高温赶入车厢。列车在几声蜂鸣后，驶于室温超导体轨道之上，飞快地远去。</p><p>「尊敬的旅客朋友们，列车即将进入真空隧道，若您的耳朵感到不适，可以尝试做吞咽咀嚼动作平衡气压，如有其他不适，请立即联系工作人员。」广播声响起，紧接着是一声轰鸣，窗外变得一片漆<br>黑，那种黑，是深不见底的深渊。</p><p>两个小时后，窗外明朗起来，鳞次栉比的房屋缠绕着绿藤，高楼之间环绕着几缕青烟。高架桥、天桥、轻轨横行交错其间大多都已上了岁数，老旧不堪，破损的水泥墙潸然泪下，霓虹灯牌在斜阳下黯然失色。</p><p>列车停站，人群鱼贯而出，散向四面八方。</p><p>「接下来去哪？」石月仙看向朦胧的天空，层云之中透出几丝微弱的光芒。</p><p>「人呢？怎么沉默了？」陈鸢黑褐色的瞳孔倒映着朦胧的层云。</p><p>四人只得先找到一处长椅休息，以等待下一步行动。</p><p>「话说，为什么当时杜子娟没有和丁教授被带走，而是与我们一同被带走呢？」石月仙仍抛不开过去的羁绊。</p><p>「平常我在那个时候都会去买菜吧，也许正好是我买菜回来的路上看见表舅被带走了吧。」杜子娟说道。</p><p>「很难想象一个技术宅女会去亲自买菜。」石月仙调侃道。</p><p>「你这是刻板印象吧。写代码写累了还不能出去走走？」杜子娟回怼道。</p><p>「这不是重点啊，我家到丁教授家跑的话需要 5 分钟，也就是说，从你看到丁教授被带走开始，到我们赶过去，像石月仙说的，我们看到军车走的时间，起码需要 10 分钟，雨天的话，可能需要更久。军<br>队的行动速度难道这么慢吗？十分钟时间居然只把一个人送上了一辆车？」陈鸢倒吸一口凉气。</p><p>丁教授皱了皱眉头：「也许他们是故意的？那又是出于什么……」</p><p>「因为她也是特殊的存在啊。」陌生（已经不陌生了）而又空灵的声音再度响起。</p><p>「你终于出现了！所以我们该去哪？」杜子娟早已按耐不住内心的急切。</p><p>「乌托邦路 1001 号，这里，你们会得到所有的答案。」空灵的声音回复道。</p><p>「我来叫车。」陈鸢掏出终端核心。</p><p>顷刻，一辆反重力出租飞车自远方飞来，底下整齐的线圈清晰可见，车底的边缘被镀上了一层充满科技感的莹蓝色光辉，一股强大的无形的力将众人往后推，石月仙略微踉跄几步。</p><p>四人上了车，飞车飞驰而去，穿梭云霄，划过苍穹的隼，在缭绕的烟雾中消失得无影无踪。</p><p>不一会，众人下了车。一幢怪异的房屋站在众人眼前，哥特式的尖顶，中式宫殿似的屋檐，古罗马式的拱券，简约式的落地窗。</p><p>「有一种，说不上来的美……」沉默了石月仙。</p><p>「想必，设计者的身世，一定很复杂吧。」陈鸢推了推鼻梁上的黑框眼镜。</p><p>吱呀一声，厚重的橡木木门嘶哑着，张开巨口。一只穿着欧式燕尾服的「兔子」走了出来。</p><p>「一只……兔子！？」杜子娟凑上前去。</p><p>那只「兔子」的瞳孔突然放得硕大，泛着红光。</p><p>「蓓斯格不是兔子，是以基于参照人类大脑神经元系统编译的算法语言模型的智能对话软件为基础的智能家居服务机器人。」蓓斯格生气地用幼女般的声音说道。</p><p>「啊？」石月仙眼睛瞪得如石榴果一般大。</p><p>「它是一个以智能对话软件为基础的智能家居服务机器人，并且这个对话软件的语言模型是参照人类神经元系统编写的。」杜子娟轻蔑地笑了下。</p><p>「这句话，应该没有语病吧……」石月仙的眼睛疯狂地打转。</p><p>「不知道。」陈鸢与丁教授几乎是异口同声。</p><p>「是客人啊，请进。」门后传出熟悉的陌生声音。</p><p>「这声音，好熟悉。」陈鸢踌躇着。</p><p>机器人兔子吃力地把门顶开。长廊上几盏昏暗的灯摇摇欲坠，古朴的墙壁上，刻满了各种古老的文字。</p><p>「归真会。」丁教授弯下腰，盯着墙上的甲骨文喃喃自语道。</p><p>「第一次！有外人把这些文字念出来了！蓓斯格好激动！」兔子机器人激动地摇着小手，「尾巴」轻快地晃动着。</p><p>「好可爱。」杜子娟摸了摸蓓斯格柔软的兔耳。那只机器人兔子好像害怕了，一下子溜得远远的。</p><p>长廊的尽头，一位披着白色长发的女子坐在旋转椅上，雪白的长发映着昏暗的光，披在椅背上。只见这位女子缓缓地鼓掌，又不紧不慢地转过椅子。</p><p>「欢迎光临归真会，初次见面，叫我句芒便好。」</p><p>白发女子站起身，将白皙的手伸出，作握手状。</p><p>「中国古代神话中的春神。」丁教授思索道。</p><p>杜子娟走上前，与女子握手。在看清女子白色长发下的年轻面孔时，杜子娟吓得迅疾地将手缩回。</p><p>「啊！」杜子娟尖叫一声。窗外几只麻雀受了惊，一跃而起，飞向天边。</p><p>「哦，不必紧张，这只是一种特殊的病。」句芒的声音逐渐空灵，变得像仲夏吹拂的风一般朦胧。</p><p>「这个声音，好熟悉。原来是你！」石月仙惊叹道。</p><p>女子碧蓝的眼眸深得像湖水。她撩开遮挡面部的长发，另一只眼眸却碧绿得像翡翠。</p><p>「居然是异瞳，真是个奇怪的病呢。」陈鸢说道。</p><p>「我们进去谈吧。」句芒缓缓走进一间茶室，在茶几前盘膝而坐。</p><p>顷刻，众人皆落座。</p><p>「在这里，你们可以得到所有的答案。」句芒说道。</p><p>石月仙抢先问道：「归真会是什么？还有，你是如何跟我们说话的？」</p><p>句芒脸上，挂着静谧的笑。</p>]]></content>
    
    
    
    <tags>
      
      <tag>飞石</tag>
      
      <tag>小说</tag>
      
      <tag>离谱网文</tag>
      
      <tag>路过的某个学渣</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Zerotier 自定义 Planet 后与标准节点互通</title>
    <link href="/2023/07/06/zerotier-planet-convert/"/>
    <url>/2023/07/06/zerotier-planet-convert/</url>
    
    <content type="html"><![CDATA[<p>由于国内特殊的网络原因<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="不作评价">[1]</span></a></sup>，Zerotier 官方提供的 Planet 用户体验不佳。为此，不少人选择自建私有 Moon，甚至私有 Planet 服务器。然而，正如<a href="https://docs.zerotier.com/self-hosting/introduction#:~:text=If%20you%20are%20using%20a%20custom%20root%20setup%2C%20your%20nodes%20won%27t%20be%20able%20to%20find%20standard%20nodes.">官方文档所说</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[If you are using a custom root setup, your nodes won't be able to find standard nodes. ](https://docs.zerotier.com/self-hosting/introduction#:~:text=If%20you%20are%20using%20a%20custom%20root%20setup%2C%20your%20nodes%20won%27t%20be%20able%20to%20find%20standard%20nodes.)如果你使用自定义根配置，你的节点将无法找到其他标准节点。">[2]</span></a></sup>，使用私有 Planet 服务器会使你的节点无法找到其他的标准节点。本文试图提出一种方案在使用私有 Planet 服务器的同时与标准节点通信。</p><h2 id="一、生成-moon-json"><a href="#一、生成-moon-json" class="headerlink" title="一、生成 moon.json"></a>一、生成 moon.json</h2><p>这步主要是为了一个模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs batch">cd C:\ProgramData\ZeroTier\One<br>zerotier-idtool initmoon identity.public &gt;&gt; planet.json<br></code></pre></td></tr></table></figure><p>得到的 json：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br> <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;objtype&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;roots&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><br>   <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br>   <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey_SECRET&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;updatesMustBeSignedBy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;worldType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;moon&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="二、获得官方-Planet-的-identity-和-stableEndpoints"><a href="#二、获得官方-Planet-的-identity-和-stableEndpoints" class="headerlink" title="二、获得官方 Planet 的 identity 和 stableEndpoints"></a>二、获得官方 Planet 的 identity 和 stableEndpoints</h2><p>使用以下代码（照着 attic&#x2F;world&#x2F;mkworld.cpp 和 node&#x2F;Topology.cpp 改的）</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/C25519.hpp&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/Identity.hpp&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/InetAddress.hpp&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;node/World.hpp&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ZT_DEFAULT_WORLD_LENGTH 570 <span class="hljs-comment">// 这俩行来自 Topology.cpp</span></span><br><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> ZT_DEFAULT_WORLD[ZT_DEFAULT_WORLD_LENGTH] = &#123;<span class="hljs-number">0x01</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0xc9</span>,<span class="hljs-number">0x0a</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x7e</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0x60</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0xb8</span>,<span class="hljs-number">0xb3</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x69</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0x91</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x9a</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0x66</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0x76</span>,<span class="hljs-number">0x4c</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x56</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x9f</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0xe6</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x6f</span>,<span class="hljs-number">0xb4</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x7b</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0x33</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x3f</span>,<span class="hljs-number">0xda</span>,<span class="hljs-number">0xac</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x73</span>,<span class="hljs-number">0x40</span>,<span class="hljs-number">0xa6</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x21</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x4a</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0xbf</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x9a</span>,<span class="hljs-number">0xc9</span>,<span class="hljs-number">0xc8</span>,<span class="hljs-number">0x18</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0x36</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0x76</span>,<span class="hljs-number">0x37</span>,<span class="hljs-number">0xef</span>,<span class="hljs-number">0x4d</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x4d</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x46</span>,<span class="hljs-number">0x84</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0x13</span>,<span class="hljs-number">0x79</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x79</span>,<span class="hljs-number">0xb4</span>,<span class="hljs-number">0xc4</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0x60</span>,<span class="hljs-number">0x48</span>,<span class="hljs-number">0x24</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0xe1</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x9b</span>,<span class="hljs-number">0xe0</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0x29</span>,<span class="hljs-number">0x3c</span>,<span class="hljs-number">0x8b</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0xf1</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0xd2</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x48</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0xaf</span>,<span class="hljs-number">0xc5</span>,<span class="hljs-number">0x49</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x35</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0xa7</span>,<span class="hljs-number">0x5a</span>,<span class="hljs-number">0xdd</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0xce</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0xf6</span>,<span class="hljs-number">0xad</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x0d</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0x82</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0xbb</span>,<span class="hljs-number">0x77</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0x1e</span>,<span class="hljs-number">0xfa</span>,<span class="hljs-number">0x4b</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0xda</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x7a</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0xdd</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x9e</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0x7d</span>,<span class="hljs-number">0xed</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x4e</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xc5</span>,<span class="hljs-number">0xdf</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0x6d</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0xa6</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0x13</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x29</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0x97</span>,<span class="hljs-number">0x8e</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0xd3</span>,<span class="hljs-number">0x94</span>,<span class="hljs-number">0x8c</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0x3a</span>,<span class="hljs-number">0x8e</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x3d</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0xf4</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0x6a</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x0c</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0x1b</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x98</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x30</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x51</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x77</span>,<span class="hljs-number">0x8c</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x3f</span>,<span class="hljs-number">0x66</span>,<span class="hljs-number">0x81</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0x9e</span>,<span class="hljs-number">0x5a</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0x9f</span>,<span class="hljs-number">0xba</span>,<span class="hljs-number">0x33</span>,<span class="hljs-number">0xe6</span>,<span class="hljs-number">0x21</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0xe1</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xbc</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x1b</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x95</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0xd8</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0x2e</span>,<span class="hljs-number">0x42</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x2c</span>,<span class="hljs-number">0xb6</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x41</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0x81</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0x4a</span>,<span class="hljs-number">0xb1</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0xba</span>,<span class="hljs-number">0x3d</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x3a</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0x99</span>,<span class="hljs-number">0xa1</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x70</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0x42</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x98</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0xbc</span>,<span class="hljs-number">0xa1</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x19</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0xe2</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0x0e</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xd7</span>,<span class="hljs-number">0xd5</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0x40</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x08</span>,<span class="hljs-number">0xb1</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0xa3</span>,<span class="hljs-number">0x7d</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x7b</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0xe5</span>,<span class="hljs-number">0x41</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x5d</span>,<span class="hljs-number">0x3e</span>,<span class="hljs-number">0xf1</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0x90</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0xc0</span>,<span class="hljs-number">0x1d</span>,<span class="hljs-number">0xff</span>,<span class="hljs-number">0x23</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0x7a</span>,<span class="hljs-number">0xd4</span>,<span class="hljs-number">0x23</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x95</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x2c</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x11</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x72</span>,<span class="hljs-number">0xbd</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0xdc</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x32</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0x8a</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x49</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0xd0</span>,<span class="hljs-number">0xdb</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x6a</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0x1d</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0xc1</span>,<span class="hljs-number">0x61</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0x2a</span>,<span class="hljs-number">0x2b</span>,<span class="hljs-number">0x8f</span>,<span class="hljs-number">0x0f</span>,<span class="hljs-number">0xf9</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x74</span>,<span class="hljs-number">0xfb</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0xe3</span>,<span class="hljs-number">0xbe</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0x1c</span>,<span class="hljs-number">0xbf</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0xef</span>,<span class="hljs-number">0x17</span>,<span class="hljs-number">0xb7</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x82</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0xa0</span>,<span class="hljs-number">0xa2</span>,<span class="hljs-number">0xa2</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x56</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x96</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0xbd</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x24</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0x7c</span>,<span class="hljs-number">0xc8</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0x7f</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x04</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0x11</span>,<span class="hljs-number">0x35</span>,<span class="hljs-number">0x9b</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>,<span class="hljs-number">0x06</span>,<span class="hljs-number">0x2a</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0xa0</span>,<span class="hljs-number">0xd4</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x99</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x09</span>&#125;;<br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> ZeroTier;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>World world;<br>world.<span class="hljs-built_in">deserialize</span>(<span class="hljs-built_in">Buffer</span>&lt;ZT_DEFAULT_WORLD_LENGTH&gt;(ZT_DEFAULT_WORLD, ZT_DEFAULT_WORLD_LENGTH), <span class="hljs-number">0</span>);<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; root : world.<span class="hljs-built_in">roots</span>()) &#123;<br><span class="hljs-type">char</span> buf[ZT_IDENTITY_STRING_BUFFER_LENGTH];<br>std::cout &lt;&lt; root.identity.<span class="hljs-built_in">toString</span>(<span class="hljs-literal">false</span>, buf) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; sp : root.stableEndpoints) &#123;<br><span class="hljs-type">char</span> buf2[ZT_IDENTITY_STRING_BUFFER_LENGTH];<br>std::cout &lt;&lt; sp.<span class="hljs-built_in">toString</span>(buf2) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上代码发布在<a href="https://github.com/cxzlw/ZeroTierOne/blob/dev/attic/world/read_planet.cpp">ZeroTierOne&#x2F;attic&#x2F;world&#x2F;read_planet.cpp at dev · cxzlw&#x2F;ZeroTierOne · GitHub</a>。</p><p>运行结果如下：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cafe9efeb9</span>:<span class="hljs-number">0</span>:ccdef76bc7b97ded904eabc5df09886d9c1514a610036cb9139cc214001a2958978efcec15712dd3948c6e6b3a8e893df01ff493d1f8d9806a860c5420571bf0<br><span class="hljs-attribute">104</span>.<span class="hljs-number">194</span>.<span class="hljs-number">8</span>.<span class="hljs-number">134</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2605</span>:<span class="hljs-number">9880</span>:<span class="hljs-number">200</span>:<span class="hljs-number">1200</span>:<span class="hljs-number">30</span>:<span class="hljs-number">571</span>:e34:<span class="hljs-number">51</span>/<span class="hljs-number">9993</span><br><br><span class="hljs-attribute">778cde7190</span>:<span class="hljs-number">0</span>:<span class="hljs-number">3</span>f6681a99e5ad1895e9fba33e6212d4454e168bcec7112101bf000956ed8e92e42892cb6f2ec410881a84ab19da50e1287ba3d926c3a1f755cccf299a1207055<br><span class="hljs-attribute">103</span>.<span class="hljs-number">195</span>.<span class="hljs-number">103</span>.<span class="hljs-number">66</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2605</span>:<span class="hljs-number">9880</span>:<span class="hljs-number">400</span>:c3:<span class="hljs-number">254</span>:f2bc:a1f7:<span class="hljs-number">19</span>/<span class="hljs-number">9993</span><br><br><span class="hljs-attribute">62f865ae71</span>:<span class="hljs-number">0</span>:e2076c57de870e6288d7d5e7404408b1545efca37d67f77b87e9e54168c25d3ef1a9abf2905ea5e785c01dff23887ad4232d95c7a8fd2c27111a72bd159322dc<br><span class="hljs-attribute">50</span>.<span class="hljs-number">7</span>.<span class="hljs-number">252</span>.<span class="hljs-number">138</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2001</span>:<span class="hljs-number">49</span>f0:d0db:<span class="hljs-number">2</span>::<span class="hljs-number">2</span>/<span class="hljs-number">9993</span><br><br><span class="hljs-attribute">cafe04eba9</span>:<span class="hljs-number">0</span>:<span class="hljs-number">6</span>c6a9d1dea55c1616bfe2a2b8f0ff9a8cacaf70374fb1f39e3bef81cbfebef17b7228268a0a2a29d3488c752565c6c965cbd6506ec24397cc8a5d9d15285a87f<br><span class="hljs-attribute">84</span>.<span class="hljs-number">17</span>.<span class="hljs-number">53</span>.<span class="hljs-number">155</span>/<span class="hljs-number">9993</span><br><span class="hljs-attribute">2a02</span>:<span class="hljs-number">6</span>ea0:d405::<span class="hljs-number">9993</span>/<span class="hljs-number">9993</span><br></code></pre></td></tr></table></figure><h2 id="三、按照上述结果修改-moon-json"><a href="#三、按照上述结果修改-moon-json" class="headerlink" title="三、按照上述结果修改 moon.json"></a>三、按照上述结果修改 moon.json</h2><p>大概修改成这样</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br> <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cafe9efeb9&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;objtype&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;roots&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cafe9efeb9:0:ccdef76bc7b97ded904eabc5df09886d9c1514a610036cb9139cc214001a2958978efcec15712dd3948c6e6b3a8e893df01ff493d1f8d9806a860c5420571bf0&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;104.194.8.134/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2605:9880:200:1200:30:571:e34:51/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;778cde7190:0:3f6681a99e5ad1895e9fba33e6212d4454e168bcec7112101bf000956ed8e92e42892cb6f2ec410881a84ab19da50e1287ba3d926c3a1f755cccf299a1207055&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;103.195.103.66/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2605:9880:400:c3:254:f2bc:a1f7:19/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;62f865ae71:0:e2076c57de870e6288d7d5e7404408b1545efca37d67f77b87e9e54168c25d3ef1a9abf2905ea5e785c01dff23887ad4232d95c7a8fd2c27111a72bd159322dc&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;50.7.252.138/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2001:49f0:d0db:2::2/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>    <span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;identity&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cafe04eba9:0:6c6a9d1dea55c1616bfe2a2b8f0ff9a8cacaf70374fb1f39e3bef81cbfebef17b7228268a0a2a29d3488c752565c6c965cbd6506ec24397cc8a5d9d15285a87f&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;stableEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;84.17.53.155/9993&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;2a02:6ea0:d405::9993/9993&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;signingKey_SECRET&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;updatesMustBeSignedBy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-punctuation">,</span><br> <span class="hljs-attr">&quot;worldType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;moon&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="四、生成-moon-文件"><a href="#四、生成-moon-文件" class="headerlink" title="四、生成 .moon 文件"></a>四、生成 .moon 文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">zerotier-idtool genmoon .\moon.json<br></code></pre></td></tr></table></figure><h2 id="五、使用-moon-文件"><a href="#五、使用-moon-文件" class="headerlink" title="五、使用 .moon 文件"></a>五、使用 .moon 文件</h2><p>在 Zerotier 目录<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linux 是 `/var/lib/zerotier-one`，Windows 是 `C:\ProgramData\ZeroTier\One\`，别的不知道。">[3]</span></a></sup>下新建文件夹 moons.d。</p><p>把生成的 xxxxxxxxxxxxxxxx.moon 放到你的 moons.d文件夹。</p><p>重启 Zerotier 服务（不会重启的建议重启电脑）。</p><p>这样就好了，你可以开始享用你的自定义 Planet 带来的低延迟体验和官方 Planet 上大量的节点了</p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>在这篇文章中，我们通过将 Zerotier 自带的 Planet 转为 Moon 来进行连接，以帮助使用自定义 Planet 的节点与官方 Planet 上的节点进行通信。这方便了我们在使用低延迟的自建 Planet 的同时与大量标准节点进行通信。</p><h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>不作评价<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.zerotier.com/self-hosting/introduction#:~:text=If%20you%20are%20using%20a%20custom%20root%20setup%2C%20your%20nodes%20won%27t%20be%20able%20to%20find%20standard%20nodes.">If you are using a custom root setup, your nodes won’t be able to find standard nodes. </a>如果你使用自定义根配置，你的节点将无法找到其他标准节点。<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Linux 是 <code>/var/lib/zerotier-one</code>，Windows 是 <code>C:\ProgramData\ZeroTier\One\</code>，别的不知道。<a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>cxzlw</tag>
      
      <tag>Zerotier</tag>
      
      <tag>自建 Planet</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《飞石》Pt.1 未掷出的石子 第一章：不存在的历史</title>
    <link href="/2023/07/05/trace-of-line-01/"/>
    <url>/2023/07/05/trace-of-line-01/</url>
    
    <content type="html"><![CDATA[<p>欢迎来番茄小说看：<a href="https://fanqienovel.com/page/7252346503144934404">飞石完整版在线免费阅读_飞石小说_番茄小说官网</a></p><div class="note note-info">            <p>本小说任何情节均为虚构，与现实中任何国家、团体、组织与个人无关</p>          </div><p>不存在的历史，勾起了石月仙的注意，随着找寻真相的深入，一个隐瞒了全世界的阴谋浮出水面。而对于人类，阴谋何来，何从，何去？</p><h2 id="第一章：不存在的历史"><a href="#第一章：不存在的历史" class="headerlink" title="第一章：不存在的历史"></a>第一章：不存在的历史</h2><p>「第三次科技革命后，人类进入信息时代，信息化开始影响人类的历史进程……」</p><p>「为什么初中高中上过的还要再上一遍啊？我都快烦死了。」石月仙在心中自言自语道，眼睛无神地看着教授在全息屏上指指点点。</p><p>「怎么就没有第四次科技革命呢？第一次工业革命与第二次工业革命之间几乎没有罅隙，第二次与第三次也只隔了几十年，第三次科技革命都过去快 100 年了，怎么第四次科技革命一点苗头的没有呢？」</p><p>下课铃响，教授一溜烟没影了，消失在学生们的视野中。学生们鱼贯而出，奔着食堂而去。留下石月仙一人在教室里沉思。</p><p>「前几年的反重力技术，为什么仅仅运用在交通上呢？而且没人知道这项技术的原理，反重力技术的出现会是第四次科技革命的源头吗？」</p><p>一阵如蟾蜍一般的叫声回响在空荡的教室中。石月仙起身走出教室，穿过鳞次栉比的教学楼，终于走到了饭堂前。只见同系的人垂头丧气地走出来。</p><p>「怎么了？饭被抢完了？」石月仙问道。</p><p>「那可不，我们历史系总是放得最晚的那一个，最后一批饭被信息技术系那一帮吃货抢完了。」一个同学说道。</p><p>「只好叫外卖了，虽然要等一会。」另一个同学掏出终端核心，终端核心将点餐界面投影在众人面前。</p><p>「AA 制吧，每个人付自己的。」石月仙提议道。众人附和。</p><p>等餐期间，石月仙抛出了脑中的疑问，霎时间众说纷纭。</p><p>「也许是人类的科学发展到头了？」</p><p>「或者是自然环境不足以支撑生产力发展，导致科技发展没有动力源推动吗？」</p><p>「哎呀，管它呢，科学家的事和我们历史系学生有什么关系？」</p><p>石月仙觉得这些说法都有道理，但又都不太合理。</p><p>「算了，还是问问陈鸢学长吧，他懂得多，找他问说不定会有答案。」</p><p>下午放学后，正值周末，石月仙得以回家拜访住在对门的陈鸢。</p><p>几阵敲门声后，门缓缓而开，陈鸢看见石月仙，连忙请进门。</p><p>「是什么风把你吹来了？这次又有什么问题问我？」陈鸢的眼睛炯炯有神，好像下一秒就能来往古今，穿梭时空。</p><p>石月仙再一次抛出了那一个问题。陈鸢的手揪着下巴，倒吸一口凉气。</p><p>顷刻，他终于开口：「说实话，我没头绪。」</p><p>「所以第四次科技革命到底是发生了，只是我们不知道，还是没发生呢？」石月仙疑惑地问道。</p><p>「要说发生了吧，近几年反重力技术在交通工具上的运用和全息投影技术在电子产品方面的运用说明科技进步了不少；但要说没发生吧，后者是对第三次科技革命产物的改进，没有革新性，前者又不知道为什么没有运用于生产，而且没有人知道其运行原理。」陈鸢边说，边回头翻找书架上的历史文献。</p><p>窗外下着倾盆大雨，梅雨时节的阴风时不时地溜进阴暗的房间，并调皮地光顾一圈，随性地翻了几页书，无趣地走了。扶摇直上，直奔远处庞大的由纺织混凝土构建而成的庞然巨物——那是漂浮在老城上的新城。石月仙拿起终端核心，手指一划，屋内顿时明堂起来。</p><p>「找到了，我爷爷当年拼老命才护存下来的历史书。」陈鸢轻柔地擦拭着泛黄的封皮，扫去积灰。</p><p>「拼老命护存下来的？」石月仙大感震惊，瞳孔放得如黑珍珠一般大。</p><p>「对，我爷爷说，这是历史所尘封的往事，一些人所不愿意看到的。当年知识大革命爆发的时候，几乎所有历史类书籍全部被联合政府焚毁了，他和丁教授守着居民楼，冒着生命危险，击退了前来焚书的民间组织，这才成功守护了我们家的藏书。」陈鸢抚摸着褶皱的纸页，眼睛里闪着晶莹的微光。</p><p>「我只听说过，知识大革命是一些民众和官员为了彻底改变教育体系而发动的一场暴力运动。最后搞得各国取消了统一升学考试，直接赋予各大学自治权。」石月仙眉头褶皱起来。</p><p>陈鸢扶着桌案，缓缓说道：「教育革命只是假象，实际上……」一阵急促的敲门声把使说话声戛然而止，如同一株苗被掐死在新泥之中。</p><p>陈鸢连忙起身，拉开门，只见一位少女，扶着墙壁，气喘吁吁，眼眸里闪着飘忽不定的光。</p><p>「是你？怎么这么急匆匆的？出了什么事吗？」陈鸢问道。</p><p>「是教授，丁教授他……被军队带走了！」少女娇柔的声音里镶嵌着恐惧。</p><p>「我现在就去看看。」陈鸢披上雨衣，就随少女冲出门去。石月仙也立刻拽起雨伞，带上门，朝着烟帷奔去。</p><p>「丁教授？（丁胜）我听说过，才到中年就退休的教授……可是这和军方有什么关系？」石月仙边狂奔，心里边嘀咕着。</p><p>穿过烟帷与街道，只见萧疏树木下，一辆军用飞车腾空而起，闪着红光，飞驰而去。</p><p>街道小巷里空无一人，往日车水马龙的景象在呼啸的阴风中如烟消云散一般消失，唯余渺小的三人在烟帷雨幕中无助地站立。</p><p>「怎么办？表舅就这样莫名其妙地被带走了。」少女欲哭无泪。</p><p>陈鸢拍拍她的肩，安慰道：「没事的，杜子娟，丁教授为人正直，又没干什么坏事……」</p><p>「可是军方把一个退休历史教授带走是何用意呢？」杜子娟颤颤巍巍。</p><p>出乎所有人的意料，骤然一声刺耳的，深入脑髓的声响回荡在三人脑中。石月仙捂着双耳，却也是徒劳，帷幕拉下，一片黑黢黢，紧接着便是身体不受控制，瘫倒在地。</p><p>不知过了多久，恍惚间，石月仙隐隐约约地听到某人的交谈声。</p><p>「将军，这些人怎么办？上面只要他一个。」</p><p>「这些人等会做记忆清除，然后放走。」</p><p>「我们先核验一下身份……等等，我们好像弄错人了！」</p><p>「将军，你确定我们弄错人了？要不要再找上面确认一下？」</p><p>「不用了，我敢肯定，一定是弄错了，你看……」</p><p>……</p><p>不知又过了多久，石月仙终于醒了过来，只见眼前是一台古老的机械钟，钟摆正吃力地摇摆着。再定睛一看，环顾四周，除了陈鸢和杜子娟，还有一位正在沉睡的中年男子。</p><p>「我才注意到你们睡着了，奇了怪了，刚刚我们不是还在讨论阿兹特克文明吗？」 陈鸢说到。</p><p>「不知道啊，诶？表舅？醒醒！」杜子娟推搡着中年男子，中年男子打了一声哈欠，伸了个懒腰，才从沉睡中醒来。</p><p>「是不是二氧化碳含量过高了啊，刚刚我和陈鸢还恍惚了一下，差点睡过去。」杜子娟起身前去开窗，窗外旖旎的阳光抚摸着葳蕤的树林，大地吐着热浪，碧空之上万里无云。</p><p>「话说刚刚丁教授不是被军方带走了吗？石月仙疑问道。</p><p>「你在胡说什么啊，是不是刚刚做梦了？」陈鸢摸了摸石月仙的头。「没发烧啊。」</p><p>正当石月仙迷茫之际，众人已经沉醉于阿兹特克文明的讨论之中了。</p><p>「他妈的，今天到底是怎么回事？是我记忆错乱了吗？还是我把梦境当成现实了？」石月仙心里想象着无限种可能性，但都没办法说服自己。</p><p>「这就是不存在的历史啊。」陌生而空灵的声音在石月仙脑海中响起。</p><p>「是谁？谁在跟我说话？」石月仙彷徨地问道。</p><p>众人的目光再次投向石月仙</p><p>「你没事吧？要不我给你冲一杯咖啡？」杜子娟关切道。</p><p>石月仙摆摆手：「我一个人静静就好，也许是我昨天晚上没睡好。」</p><p>「话说你表舅是历史教授，你怎么就是信息技术系的呢？」陈鸢调侃道。「你明明还是有点学历史的天赋的。」</p><p>「我看是抢饭挺有天赋的。」石月仙内心暗暗调侃道。</p><p>霎时间，又是陌生而空灵的声音在脑畔响起，但这一次，不只是石月仙。</p><p>「N29.35,E106.33。」</p><p>「是谁？谁在说话？」陈鸢叫到。</p><p>「你们也听到了？」丁教授惊魂未定。</p><p>「这是在说地理坐标吗？」杜子娟问道。</p><p>「不会有错，就是地理坐标，我估计应该是在西京附近。」石月仙肯定地说道。</p><p>「是谁在跟我们说话呢？以这么诡异的形式。」丁教授倒吸一口凉气。</p><p>沉默是今午的康桥。</p><p>「所以要怎么做到同时在四个人脑海里说话呢？」陈鸢揉搓着下巴颏。</p><p>「如果大脑是个终端，那就有可能。」杜子娟不假思索便答道。</p><p>「等等，陈学长，我是什么时候拜访你的来着？」石月仙问道。</p><p>「今天早上啊，你问我阿兹特克文明的事，我就带你来丁教授家讨论了。」陈鸢答道。</p><p>「现在去你家，我知道发生什么了。」石月仙不由分说拉着陈鸢的手就走。</p><p>「诶等等，还有你那个坐标的事呢！」杜子娟喊到。</p><p>「等会再说。」杜子娟耳畔是渐远的石月仙的喊声。</p><p>石月仙几乎是撞开了陈鸢家门，把陈鸢拉到客厅。</p><p>「你这么急干嘛？」陈鸢喘着粗气。</p><p>「今天你撕过日历吗？」石月仙问道。</p><p>「撕过了。」陈鸢摊开手。</p><p>「来，把你的日历拿出来。我记得你有把日历放在枕头底下的习惯。」石月仙推开陈鸢卧室的门。</p><p>陈鸢弯下腰去，翻开枕头，枕头底下是被压得褶皱了的纸质日历。</p><p>「今天是几号？」石月仙掏出核心终端，把全息影像几乎是贴在了陈鸢脸上。</p><p>「2116 年 6 月 18……等等，日历上显示的日期6月17日！这不可能！我清楚地记得我今天早上，正好在你来的前几分钟，把 17 日的日历撕掉了！</p><p>「这说明什么？说明今天早上你根本不在你家，甚至根本没有醒过来！」</p><p>「所以，你方才说的什么军方什么的，难道不是胡话？」</p><p>「这是我觉得最蹊跷的地方，你们的记忆都对的上，但唯独我的记忆与你们的有出入。我记得那天，6 月 17 日下午……」陈鸢简述了自己在拜访陈鸢后的所有记忆。</p><p>「这就是不存在的历史！你记得与我们有出入绝对不是巧合！可能是谁的特意安排。而且并不是你记忆错乱了，是我们失忆了！并且被覆写了新的不存在的记忆！」陈鸢惊叹道。</p><p>「对了，你还记得知识大革命吗？」</p><p>「不就是一些民众和官员为了彻底改变教育体系而发动的一场暴力运动吗？」陈鸢不假思索便说道。</p><p>石月仙在书架前来回踱步。在寻找遍书架和桌案后，他肯定的眼神闪着光，对陈鸢说：「书不见了，那本尘封着历史真相的书不见了。」</p><p>「你在说哪本书？」陈鸢走上前。</p><p>「果然，这么想就说得通了！」石月仙重重地拍了一下桌案。</p>]]></content>
    
    
    
    <tags>
      
      <tag>飞石</tag>
      
      <tag>小说</tag>
      
      <tag>离谱网文</tag>
      
      <tag>路过的某个学渣</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>聊聊知乎盐选反爬 (回答页篇)</title>
    <link href="/2023/07/05/zhihu-aac-old/"/>
    <url>/2023/07/05/zhihu-aac-old/</url>
    
    <content type="html"><![CDATA[<p>最近，知乎上线了针对专栏<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="专栏反爬现已更新，故本文只以回答反爬为演示。">[1]</span></a></sup>中盐选文章的反爬系统，随后该系统也被运用在知乎回答页面中的盐选文章上。具体表现为爬取的文章内容中出现大量的错乱词汇。而在本篇文章中，我们将一步步带领各位解开这些乱码。在这个过程中，我们将对字体反爬有更深入的认识，并学到运用字体反爬时需要注意的问题。</p><h2 id="一、知乎反爬效果"><a href="#一、知乎反爬效果" class="headerlink" title="一、知乎反爬效果"></a>一、知乎反爬效果</h2><p>来自知乎回答<a href="https://www.zhihu.com/question/41922324/answer/3073556909">不被爱是一种什么样的感受？ - 知乎</a></p><p><img src="/../img/image.png" alt="乱码示意图"> </p><p>如图所示，在页面源码中出现了大量乱码，例如（原字，错字）：<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="由于知乎回答页反爬使用了两套字体，故本文所有截图，代码运行结果等内容可能与实际不符。你可以选择以实际为主或刷新页面直到页面显示的内容与本文一致。">[2]</span></a></sup></p><ul><li>中 -&gt; 在</li><li>是 -&gt; 时</li><li>上 -&gt; 大</li></ul><p>这些乱码使得文章可读性大大下降，那么乱码是怎么产生的？又如何解决这个问题呢？</p><h2 id="二、找寻乱码真凶"><a href="#二、找寻乱码真凶" class="headerlink" title="二、找寻乱码真凶"></a>二、找寻乱码真凶</h2><p>观察上述现象，页面源码中的字，在被显示到页面后，居然变成了正确的字。因此我们初步推断知乎在该页面运用了字体反爬。</p><p>接下来我们打开 F12 -&gt; Network 页面，选择 Font，观察知乎加载的字体。</p><p><img src="/../img/image-1.png" alt="知乎加载的字体"></p><p>右键选择 Open in new tab 将字体保存下来。</p><p><img src="/../img/image-2.png" alt="下载的字体文件"></p><p>将字体后缀名改为 .ttf <sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label=".ttf 是因为 `data:font/ttf;...` 代表该字体是 ttf 格式的。">[3]</span></a></sup> 并打开。</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/../img/image-3.png" alt="正常字体"></div><div class="group-image-wrap"><img src="/../img/image-4.png" alt="反爬字体"></div></div></div><figcaption aria-hidden="true" class="image-caption">左：正常字体 右：反爬字体</figcaption><p>与正常字体对比，我们下载的字体明显替换了部分字体，这便是知乎用于反爬的字体了。接下来我们将分析这个字体并给出应对方案。</p><h2 id="三、致命缺陷"><a href="#三、致命缺陷" class="headerlink" title="三、致命缺陷"></a>三、致命缺陷</h2><p>字体反爬的根本原理是替换原本的字为一个新字，再用字体将新字渲染为原字，这样对程序而言就只见到新字而不是旧字了，而用户看到的还是原本的内容。因此只要找到新字与原字间的对应关系便可解决该反爬。而要找到这个对应关系，抓住字体中各个字形的特征是必不可少的一环。</p><p>我们打开 <a href="https://fontdrop.info/">FontDrop!</a> 加载字体，向下翻，观察字形的特征。</p><p><img src="/../img/image-5.png" alt="字体中的字形"></p><p>我们发现字形的 Glyph 为 uni662F 而 Unicode 为 65F6，接下来我们试着查询这两个十六进制数对应的字：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">glyph = <span class="hljs-string">&quot;\u662F&quot;</span><br>unicode = <span class="hljs-string">&quot;\u65F6&quot;</span><br><span class="hljs-built_in">print</span>(glyph, unicode)<br><span class="hljs-comment"># output: 是 时</span><br></code></pre></td></tr></table></figure><p>正好，上文提到，「是」在源码中被替换为了「时」。知乎在反爬字体中保留了原字与新字的对应关系，为我们提供了一个极为便捷的捷径。我们可以直接读取这个对应关系，而不是比对每个字的笔画<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="基于笔画比对的反爬破解见该文章：[字体反爬之汽车之家_51CTO博客_汽车之家字体反爬](https://blog.51cto.com/u_15289428/2992542)（话说这篇文章和下面注10是一个网站吧）">[4]</span></a></sup>。然而，这也是其字体反爬系统的致命缺陷，各位在自己的网站运用字体反爬时也要注意这一点。</p><p>至此，字形的特征与对应关系都被我们分析出了，接下来我们将编写程序从字体中提取对应关系。</p><h2 id="四、提取对应关系"><a href="#四、提取对应关系" class="headerlink" title="四、提取对应关系"></a>四、提取对应关系</h2><p>要提取各个字间的对应关系，首先我们需要安装 fontTools <sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="fontTools文档：[fontTools Docs — fontTools Documentation](https://fonttools.readthedocs.io/en/latest/)">[5]</span></a></sup>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install fonttools<br></code></pre></td></tr></table></figure><p>用 <code>ttLib.TTFont(filename)</code> 打开字体：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fontTools <span class="hljs-keyword">import</span> ttLib<br><br>font = ttLib.TTFont(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Input font filename: &quot;</span>))<br></code></pre></td></tr></table></figure><p>初始化一个存储对应关系的字典：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">zhihu_dict = &#123;&#125;<br></code></pre></td></tr></table></figure><p>遍历字形，获得其 Glyph 与 Unicode，并写入字典（注意这里的Glyph对应的字可能不是标准的字，比如是康熙部首<sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="康熙部首相关文章：[康熙部首导致的字典查询异常](https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhlbDBrcwfMRe9c0b15eJPVo5VFZ-BkntaZvQ1EOGDIdWZ4*dM*9NMTwroaqkGu17aagpE6SDr8v2FgsrmKGus4Z&new=1)">[6]</span></a></sup>，因此我们要对其标准化<sup id="fnref:7" class="footnote-ref"><a href="#fn:7" rel="footnote"><span class="hint--top hint--rounded" aria-label="标准化相关文章：[化异为同，Python 在背后帮你做的转换](https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhnpJwhWtfcrbfZyZ0LrFFbzVDaXDT2onRWaIWo*r2Sv9Tg*ZBiuWotp9WQdbrawvxGLj0T5U-xC2fnssc4lEsLl&new=1#:~:text=%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E6%89%8B%E5%86%99%E5%AD%97%E7%AC%A6%F0%9D%91%93%E9%80%9A%E8%BF%87%20NFKC%20%E6%A0%87%E5%87%86%E8%BD%AC%E6%8D%A2%E4%BB%A5%E5%90%8E%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%99%AE%E9%80%9A%E7%9A%84%E5%AD%97%E6%AF%8Df%EF%BC%8C%E6%89%80%E4%BB%A5%E5%9C%A8%20Python%20%E9%87%8C%E9%9D%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%9C%E4%B8%BA%E5%8F%98%E9%87%8F%E5%90%8D%EF%BC%8C%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%E3%80%82)">[7]</span></a></sup>）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> unicodedata <span class="hljs-keyword">import</span> normalize<br><br>cmap = font.getBestCmap()<br><br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> cmap.items():<br>    zhihu_dict[<span class="hljs-built_in">chr</span>(x[<span class="hljs-number">0</span>])] = normalize(<span class="hljs-string">&quot;NFKC&quot;</span>, <span class="hljs-built_in">chr</span>(<span class="hljs-built_in">int</span>(x[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>:], <span class="hljs-number">16</span>)))<br><br><span class="hljs-built_in">print</span>(zhihu_dict)  <span class="hljs-comment"># &#123;&#x27;一&#x27;: &#x27;不&#x27;, ......, &#x27;这&#x27;: &#x27;发&#x27;&#125;</span><br></code></pre></td></tr></table></figure><p>（这里的 cmap 是一个 dict，是字形的 {Unicode: Glyph}<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="其中 Unicode 为 int 而 Glyph 为形如 uni4E0D 的 str">[8]</span></a></sup>）</p><p>接下来，我们将使用得到的对应关系将带乱码的文章转为正常文章。</p><h2 id="五、去除乱码"><a href="#五、去除乱码" class="headerlink" title="五、去除乱码"></a>五、去除乱码</h2><p>这段代码很简单，不作解释。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">raw_content = <span class="hljs-string">&quot;在间那块奶酪夹心，时饼干被的喜爱了灵魂。&quot;</span><br>new_content = raw_content.translate(<span class="hljs-built_in">str</span>.maketrans(zhihu_dict))<br><span class="hljs-built_in">print</span>(new_content)  <span class="hljs-comment"># 中间那块奶酪夹心，是饼干被人喜爱的灵魂。</span><br></code></pre></td></tr></table></figure><h2 id="六、全部代码"><a href="#六、全部代码" class="headerlink" title="六、全部代码"></a>六、全部代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fontTools <span class="hljs-keyword">import</span> ttLib<br><span class="hljs-keyword">from</span> unicodedata <span class="hljs-keyword">import</span> normalize<br><br>font = ttLib.TTFont(<span class="hljs-string">&quot;DynamicFonts30.ttf&quot;</span>)<br><br>zhihu_dict = &#123;&#125;<br>cmap = font.getBestCmap()<br><br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> cmap.items():<br>    zhihu_dict[<span class="hljs-built_in">chr</span>(x[<span class="hljs-number">0</span>])] = normalize(<span class="hljs-string">&quot;NFKC&quot;</span>, <span class="hljs-built_in">chr</span>(<span class="hljs-built_in">int</span>(x[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>:], <span class="hljs-number">16</span>)))<br><br><span class="hljs-built_in">print</span>(zhihu_dict)  <span class="hljs-comment"># &#123;&#x27;一&#x27;: &#x27;不&#x27;, ......, &#x27;这&#x27;: &#x27;发&#x27;&#125;</span><br><br>raw_content = <span class="hljs-string">&quot;在间那块奶酪夹心，时饼干被的喜爱了灵魂。&quot;</span><br>new_content = raw_content.translate(<span class="hljs-built_in">str</span>.maketrans(zhihu_dict))<br><span class="hljs-built_in">print</span>(new_content)  <span class="hljs-comment"># 中间那块奶酪夹心，是饼干被人喜爱的灵魂。</span><br></code></pre></td></tr></table></figure><div class="note note-warning">            <p>温馨提示：上面字体文件名记得换成你自己下载的字体文件名</p>          </div><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>在本文的带领下，我们粗略地了解了知乎所使用的反爬技术，分析了其使用的反爬字体，找出了原字与新字的对应关系，最终将带乱码的文章转为了正常文章。其中，知乎使用的反爬字体没有去掉 Unicode 与 Glyph 的对应关系，虽然这使我们更轻松地得到了对应关系，但是对于知乎而言，这种错误无疑是致命的，因此，在字体反爬的实际运用中，我们更需要避免这种错误。<sup id="fnref:9" class="footnote-ref"><a href="#fn:9" rel="footnote"><span class="hint--top hint--rounded" aria-label="关于如何创造更坚固的字体反爬系统，可以参考这篇文章：[反爬终极方案总结—字体反爬 - 知乎](https://zhuanlan.zhihu.com/p/37838586)（值得一提的是这篇文章就被发表在在知乎上2333）">[9]</span></a></sup></p><p>知乎也在该反爬系统部署到回答页不久以后升级了其专栏反爬系统，本文所介绍的致命缺陷已被修复<sup id="fnref:10" class="footnote-ref"><a href="#fn:10" rel="footnote"><span class="hint--top hint--rounded" aria-label="值得表扬( •̀ ω •́ )y">[10]</span></a></sup>，而解码新反爬系统的内容，就留到本系列的下篇吧。</p><p>（敬请期待）</p><h2 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h2><ul><li><a href="https://cdycc.cn/">C的云存储 - C的云存储所有作品均由用户提供上传分享，仅供网友学习交流!若您的权利被侵害，请联系 357158361@qq.com</a></li><li><a href="https://github.com/cxzlw/zhihuDecrypt">GitHub - cxzlw&#x2F;zhihuDecrypt</a></li><li><a href="https://github.com/cxzlw/zhihuDecryptApp">GitHub - cxzlw&#x2F;zhihuDecryptApp: The app to decrypt zhihu’s encrypted (probably not) passages.</a></li></ul><h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>专栏反爬现已更新，故本文只以回答反爬为演示。<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>由于知乎回答页反爬使用了两套字体，故本文所有截图，代码运行结果等内容可能与实际不符。你可以选择以实际为主或刷新页面直到页面显示的内容与本文一致。<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>.ttf 是因为 <code>data:font/ttf;...</code> 代表该字体是 ttf 格式的。<a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>基于笔画比对的反爬破解见该文章：<a href="https://blog.51cto.com/u_15289428/2992542">字体反爬之汽车之家_51CTO博客_汽车之家字体反爬</a>（话说这篇文章和下面注10是一个网站吧）<a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>fontTools文档：<a href="https://fonttools.readthedocs.io/en/latest/">fontTools Docs — fontTools Documentation</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>康熙部首相关文章：<a href="https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhlbDBrcwfMRe9c0b15eJPVo5VFZ-BkntaZvQ1EOGDIdWZ4*dM*9NMTwroaqkGu17aagpE6SDr8v2FgsrmKGus4Z&new=1">康熙部首导致的字典查询异常</a><a href="#fnref:6" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>标准化相关文章：<a href="https://mp.weixin.qq.com/s?src=11&timestamp=1688488134&ver=4630&signature=JXLh7up18JREGzu-hyDHNVu4-yW-RQnmOFTegveHvhnpJwhWtfcrbfZyZ0LrFFbzVDaXDT2onRWaIWo*r2Sv9Tg*ZBiuWotp9WQdbrawvxGLj0T5U-xC2fnssc4lEsLl&new=1#:~:text=%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E6%89%8B%E5%86%99%E5%AD%97%E7%AC%A6%F0%9D%91%93%E9%80%9A%E8%BF%87%20NFKC%20%E6%A0%87%E5%87%86%E8%BD%AC%E6%8D%A2%E4%BB%A5%E5%90%8E%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%99%AE%E9%80%9A%E7%9A%84%E5%AD%97%E6%AF%8Df%EF%BC%8C%E6%89%80%E4%BB%A5%E5%9C%A8%20Python%20%E9%87%8C%E9%9D%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%9C%E4%B8%BA%E5%8F%98%E9%87%8F%E5%90%8D%EF%BC%8C%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%E3%80%82">化异为同，Python 在背后帮你做的转换</a><a href="#fnref:7" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:8" class="footnote-text"><span>其中 Unicode 为 int 而 Glyph 为形如 uni4E0D 的 str<a href="#fnref:8" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:9" class="footnote-text"><span>关于如何创造更坚固的字体反爬系统，可以参考这篇文章：<a href="https://zhuanlan.zhihu.com/p/37838586">反爬终极方案总结—字体反爬 - 知乎</a>（值得一提的是这篇文章就被发表在在知乎上2333）<a href="#fnref:9" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:10" class="footnote-text"><span>值得表扬( •̀ ω •́ )y<a href="#fnref:10" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>cxzlw</tag>
      
      <tag>知乎</tag>
      
      <tag>反爬</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
